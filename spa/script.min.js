"use strict";function _typeof(e){return e&&typeof Symbol!="undefined"&&e.constructor===Symbol?"symbol":typeof e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,s){try{var o=t[i](s),u=o.value}catch(a){n(a);return}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/collection/controller.jsx','spa/collection/style.min.css','spa/collection/view.jsx','spa/collectionSingleItem/controller.jsx','spa/collectionSingleItem/style.min.css','spa/collectionSingleItem/view.jsx','spa/connect.jsx','spa/create/controller.jsx','spa/create/style.min.css','spa/create/view.jsx','spa/createCollectionWizard/controller.jsx','spa/createCollectionWizard/style.min.css','spa/createCollectionWizard/view.jsx','spa/createItemWizard/controller.jsx','spa/createItemWizard/style.min.css','spa/createItemWizard/view.jsx','spa/editor/controller.jsx','spa/editor/style.min.css','spa/editor/view.jsx','spa/explore/controller.jsx','spa/explore/style.min.css','spa/explore/view.jsx','spa/farm/controller.jsx','spa/farm/style.min.css','spa/farm/view.jsx','spa/fullLoader.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/innerLoader.jsx','spa/item/controller.jsx','spa/item/style.min.css','spa/item/view.jsx','spa/lazyImageLoader.jsx','spa/loader.jsx','spa/menu/controller.jsx','spa/menu/style.min.css','spa/menu/view.jsx','spa/search/controller.jsx','spa/search/style.min.css','spa/search/view.jsx','spa/singleCollection/controller.jsx','spa/singleCollection/style.min.css','spa/singleCollection/view.jsx','spa/successPage/controller.jsx','spa/successPage/style.min.css','spa/successPage/view.jsx','spa/wallet/controller.jsx','spa/wallet/style.min.css','spa/wallet/view.jsx','spa/wrap/controller.jsx','spa/wrap/style.min.css','spa/wrap/view.jsx']);var CollectionController=function(t){var n=this;n.view=t};var Collection=React.createClass({displayName:"Collection",requiredModules:["spa/singleCollection","spa/collectionSingleItem","spa/editor"],getInitialState:function(){return{toggle:"items"}},toggle:function e(t){window.preventItem(t);var n=this.state&&this.state.toggle,e=t.currentTarget.dataset.toggle;e=n===e?null:e,this.setState({toggle:e})},onCollectionObjectIds:function(t){this.props.collection.items=this.props.collection.items||{},this.setState({collectionObjectIds:t})},createMoreItems:function(t){window.preventItem(t),this.emit("section/change","spa/create",{create:"CreateItemWizard",collectionAddress:this.props.collection.address})},componentDidMount:function(){var t=this;window.setHomepageLink("?collection="+this.props.collection.address),window.retrieveAndCheckModelCode(this.props.collection).then(function(){return t.forceUpdate()})},render:function(){var t=this;return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"collectionPage"},React.createElement(SingleCollection,{collection:this.props.collection,className:"collectionPageInfo",showLink:!0,showItemsCount:!0,onCollectionObjectIds:this.onCollectionObjectIds}),React.createElement("section",{className:"collectionNav"},React.createElement("ul",null,React.createElement("li",{className:this.state&&this.state.toggle==="items"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"items"},"Items")),React.createElement("li",{className:this.state&&this.state.toggle==="farm"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"farm"},"Farm")),this.props.collection&&(this.props.collection.extensionCode||this.props.collection.modelCode)&&React.createElement("li",{className:this.state&&this.state.toggle==="code"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"code"},"Code")))),this.props.collection&&this.state&&this.state.toggle==="items"&&React.createElement("section",{className:"collectionPageItems"},this.props.collection.isOwner&&React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.createMoreItems},"Add New"),React.createElement("section",{className:"collectionPageItemsOrder"},!this.state.collectionObjectIds&&React.createElement(Loader,null),this.state.collectionObjectIds&&this.state.collectionObjectIds.map(function(e){return React.createElement(CollectionSingleItem,{key:e,objectId:e,collection:t.props.collection,miniature:!0})}))),this.state&&this.state.toggle==="farm"&&React.createElement("section",{className:"collectionPageItemsFarm"},React.createElement("section",null,React.createElement("section",{className:"SoonFARM"},React.createElement("figure",{className:"FarmImg"},React.createElement("img",{src:"assets/img/farmer.png"})),React.createElement("h3",null,"Farm will available soon powered by ",React.createElement("a",{target:"_blank",href:"https://github.com/b-u-i-d-l/unifi"},"UniFi V2")," General Purposes Contracts")))),this.state&&this.state.toggle==="code"&&React.createElement("section",{className:"collectionPageItemsCode"},React.createElement("section",null,this.props.collection.extensionCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Extension"),React.createElement(Editor,{readonly:!0,firstCode:this.props.collection.extensionCode})),this.props.collection.modelCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Model"),React.createElement(Editor,{readonly:!0,firstCode:this.props.collection.modelCode}))))))}});var CollectionSingleItemController=function(t){var n=this;n.view=t};var CollectionSingleItem=React.createClass({displayName:"CollectionSingleItem",requiredScripts:["spa/loader.jsx","spa/innerLoader.jsx","spa/lazyImageLoader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return window.loadItemData(undefined,undefined,t)},"ethereum/ping":function(){return window.updateItemDynamicData(undefined,t)}}},onClick:function(t){window.preventItem(t);if(!this.state||!this.state.item)return;this.emit("section/change","spa/item",{collection:this.props.collection,item:this.state.item})},goToCollection:function(t){window.preventItem(t),this.emit("section/change","spa/collection",{collection:this.props.collection})},componentDidMount:function(){window.loadItemData(undefined,undefined,this)},render:function(){var t=this.state&&this.state.item||this.props.item,n=t&&t.background_color;return React.createElement("section",{className:"collectionPageItem"},React.createElement("a",{href:this.props.readOnly?undefined:"javascript:;",onClick:this.props.readOnly?undefined:this.onClick},React.createElement("figure",{className:"ItemIcon"},React.createElement(LazyImageLoader,{src:window.getElementImage(t)}))),t&&React.createElement("article",{className:"ItemInfo"},!this.props.miniature&&React.createElement("h3",{className:"ItemTitle"},t.name),this.props.miniature&&React.createElement("h3",{className:"ItemTitle"},window.shortenWord(t.name,25)),t.dynamicData&&React.createElement("a",{target:"_blank",href:window.context.uniswapSpawUrlTemplate.format(t.address),className:"ItemPrice"},"🦄 $ ",t.dynamicData.tokenPriceInDollarsOnUniswap?window.formatMoney(t.dynamicData.tokenPriceInDollarsOnUniswap,1):"--"),t.dynamicData&&React.createElement("a",{target:"_blank",href:window.context.openSeaItemLinkTemplate.format(this.props.collection.address,t.objectId),className:"ItemPrice"},"⛵ $ ",t.dynamicData.tokenPriceInDollarsOnOpenSea?window.formatMoney(t.dynamicData.tokenPriceInDollarsOnOpenSea,1):"--"),t.dynamicData&&t.dynamicData.totalSupply&&React.createElement("span",{className:"ItemSupply"},"Supply: ",React.createElement("b",null,window.fromDecimals(t.dynamicData.totalSupply,t.decimals))),this.props.showCollection&&React.createElement("a",{className:"ItemCollectionLink",href:"javascript:;",onClick:this.goToCollection},"from ",React.createElement("b",null,this.props.collection.symbol))))}});var Connect=React.createClass({displayName:"Connect",render:function(){return React.createElement("section",{className:"connectEtherean"},React.createElement("figure",{className:"LoadImg"},React.createElement("img",{src:"assets/img/loadMonolith.png"})),React.createElement("section",{className:"EnterSection"},React.createElement("h3",null,"Welcome Etherean"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:function(){return window.ethereum&&window.ethereum.enable()}},"Connect"),React.createElement("p",null,"You need a ",React.createElement("a",{target:"_blank",href:"https://etherscan.io/directory/Wallet"},"web3-enabler")," to use this Dapp - If you have problems connecting, refresh the page.")))}});var CreateController=function(t){var n=this;n.view=t};var Create=React.createClass({displayName:"Create",requiredModules:["spa/createCollectionWizard","spa/createItemWizard"],getState:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},create:function(t){window.preventItem(t),this.setState({create:t.currentTarget.dataset.create})},componentDidMount:function(){window.setHomepageLink("?section=create")},render:function(){var t=this.getState();return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"createPage"},!t.create&&React.createElement("section",{className:"createStart"},React.createElement("a",{className:"StartCreate"+(t.create==="CreateCollectionWizard"?" selected":""),href:"javascript:;",onClick:this.create,"data-create":"CreateCollectionWizard"},"Create a new Collection"),React.createElement("a",{className:"StartCreate"+(t.create==="CreateItemWizard"?" selected":""),href:"javascript:;",onClick:this.create,"data-create":"CreateItemWizard"},"Create a new ITEM")),t.create&&React.createElement(t.create,t)))}});var CreateCollectionWizardController=function(t){var n=this;n.view=t,n.deployingCollectionMessage="2/2 Deploy Collection",n.checkStep0=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.waitForLateInput();case 2:e=n.view.collectionName.value;if(e){s.next=5;break}throw"mmm... Your Collection deserves a name";case 5:t=n.view.collectionSymbol.value;if(t){s.next=8;break}throw"The Collection symbol is important! Dont forget it";case 8:i="",n.view.setState({collectionName:e,collectionSymbol:t,collectionENS:i});case 10:case"end":return s.stop()}},r,this)}));return t}(),n.checkENS=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=n.view.collectionENS.value,t=!1;if(!e){i.next=6;break}return i.next=5,window.blockchainCall(window.ENSController.methods.recordExists,nameHash.hash(nameHash.normalize(e+"."+window.context.ensDomainName)));case 5:t=i.sent;case 6:return i.abrupt("return",[e,t]);case 7:case"end":return i.stop()}},r,this)}));return t}(),n.checkStep1=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.waitForLateInput();case 2:e=n.view.getState();if(e.extension){i.next=5;break}throw"No host! Are you serious?";case 5:if(e.extension==="wallet"){i.next=7;break}return i.abrupt("return");case 7:t=n.view.extensionAddressInput.value;if(!!t&&!!window.isEthereumAddress(t)){i.next=10;break}throw"Extension must be a valid ethereum address!";case 10:n.view.setState({extensionAddress:t});case 11:case"end":return i.stop()}},r,this)}));return t}(),n.checkStep2=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.view.setState({hasDecimals:n.view.hasDecimals.checked});case 1:case"end":return t.stop()}},r,this)}));return t}(),n.checkStep3=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=n.view.getState();if(e.metadataType){s.next=3;break}throw"No metadata! Are you serious?";case 3:if(e.metadataType!=="custom"){s.next=15;break}return s.next=6,window.waitForLateInput();case 6:t=n.view.metadataLinkInput.value,s.t0=!t;if(s.t0){s.next=12;break}return s.next=11,window.checkMetadataLink(t);case 11:s.t0=!s.sent;case 12:if(!s.t0){s.next=14;break}throw"Not a valid metadata link!";case 14:return s.abrupt("return",n.view.setState({metadataLink:t}));case 15:return s.next=17,n.view.getMetadataValues();case 17:return i=s.sent,s.next=20,window.checkMetadataValuesForCollection(i);case 20:if(s.sent){s.next=22;break}throw"Looks like you have insered some ivalid inputs as Metadata";case 22:n.view.setState({metadata:i});case 23:case"end":return s.stop()}},r,this)}));return t}(),n.performDeploySmartContract=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e="";try{e=n.view.editor.editor.getValue()}catch(u){}if(e){o.next=4;break}throw"Please provide the source of the Extension, be a good Etherean!";case 4:return o.next=6,window.SolidityUtilities.compile(e,n.view.editor.solidityVersion.value,200);case 6:t=o.sent;try{i=t[n.view.contractSelect.value]}catch(u){}if(i){o.next=10;break}throw"You must compile and select a valid contract to deploy";case 10:return n.view.setState({loadingMessage:"Deploying Smart Contract"}),o.next=13,window.createContract(i.abi,i.bytecode);case 13:s=o.sent,n.view.setState({code:e,extensionAddress:s.options.address});case 15:case"end":return o.stop()}},r,this)}));return t}(),n.performDeploy=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;return regeneratorRuntime.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:e=n.view.getState(),t=e.extensionAddress,x.t0=e.metadata;if(x.t0){x.next=7;break}return x.next=6,window.AJAXRequest(window.formatLink(e.metadataLink));case 6:x.t0=x.sent;case 7:i=x.t0;if(e.extension!=="contract"){x.next=15;break}return x.next=11,window.SolidityUtilities.compare(t,e.code);case 11:s=x.sent;if(!!s&&Object.values(s).length!==0){x.next=14;break}throw"Contract source code and given extension address are not aligned";case 14:e.extension==="contract"&&(i.extensionCode=e.code);case 15:return i.name=e.collectionName,i.symbol=e.collectionSymbol,i.decimals=e.hasDecimals?18:1,i.hasDecimals=e.hasDecimals,i.originalCreator=window.web3.utils.toChecksumAddress(window.walletAddress),i.extensionAddress=t,n.view.setState({loadingMessage:"1/2 - Uploading metadata to IPFS"}),x.next=24,window.uploadMetadata(i);case 24:return o=x.sent,u=["string","string","bool","string","address","bytes"],a=[e.collectionName,e.collectionSymbol,e.hasDecimals,o,t||window.voidEthereumAddress,n.view.extensionAddressPayload&&n.view.extensionAddressPayload.value||"0x"],f=window.web3.utils.sha3("init("+u.join(",")+")"),f=f.substring(0,10)+window.web3.eth.abi.encodeParameters(u,a).substring(2),n.view.setState({loadingMessage:n.deployingCollectionMessage}),x.next=32,window.blockchainCall(window.ethItemOrchestrator.methods.createNative,f,e.collectionENS);case 32:return l=x.sent,n.view.emit("collections/refresh"),c=l.events,c instanceof Array||(c=Object.values(c)),x.t1=window.web3.utils,x.next=39,window.blockchainCall(window.ethItemOrchestrator.methods.factory);case 39:x.t2=x.sent,h=x.t1.toChecksumAddress.call(x.t1,x.t2),p=window.web3.utils.sha3(Object.entries(window.context.ethItemFactoryEvents).filter(function(e){return e[1]==="NativeABI"}).map(function(e){return e[0]})[0]),v=c,m=Array.isArray(v),g=0,v=m?v:v[Symbol.iterator]();case 43:if(!m){x.next=49;break}if(!(g>=v.length)){x.next=46;break}return x.abrupt("break",62);case 46:y=v[g++],x.next=53;break;case 49:g=v.next();if(!g.done){x.next=52;break}return x.abrupt("break",62);case 52:y=g.value;case 53:b=y;if(window.web3.utils.toChecksumAddress(b.address)===h){x.next=56;break}return x.abrupt("continue",60);case 56:if(b.raw.topics[0]===p){x.next=58;break}return x.abrupt("continue",60);case 58:return d=window.web3.utils.toChecksumAddress(window.web3.eth.abi.decodeParameter("address",b.raw.topics[3])),x.abrupt("break",62);case 60:x.next=43;break;case 62:return x.next=64,window.loadSingleCollection(d);case 64:return w=x.sent,x.next=67,window.AJAXRequest(window.formatLink(o));case 67:E=x.sent,S={name:E.name,image:E.image,external_url:E.external_url,collection:w,collectionAddress:d},S.created="collection",n.view.emit("section/change","spa/successPage",S);case 71:case"end":return x.stop()}},r,this)}));return t}()};var CreateCollectionWizard=React.createClass({displayName:"CreateCollectionWizard",requiredScripts:["spa/innerLoader.jsx","spa/fullLoader.jsx"],requiredModules:["spa/editor"],getDefaultSubscriptions:function(){var t=this;return{"smartContract/compilation":this.onSmartContract,"smartContract/compiling":function(){return t.compileButton.innerHTML="Compiling..."}}},compile:function(t){window.preventItem(t),this.contractSelect.innerHTML="",this.emit("editor/compile")},onSmartContract:function(t){this.compileButton.innerHTML="Compile",this.contractSelect.innerHTML="";if(!t)return;var n=[],r=Object.keys(t);for(var i=r,s=Array.isArray(i),o=0,i=s?i:i[Symbol.iterator]();;){var u;if(s){if(o>=i.length)break;u=i[o++]}else{o=i.next();if(o.done)break;u=o.value}var a=u,f=t[a];if(f.bytecode==="0x")continue;n.push(a)}this.contractSelect.innerHTML=n.map(function(e){return'<option value="'+e+'">'+e+"</option>"}).join("")},getState:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},onExtension:function(t){this.setState({extension:t.currentTarget.value,extensionAddress:null})},onMetadataType:function(t){this.setState({metadataType:t.currentTarget.value,metadataLink:null,metadata:null})},onENSChange:function(t){window.preventItem(t);var n=this,r=function(t){var r="";t[0]&&(r="&#"+(t[1]?"9940":"9989")+";"),n.result.innerHTML=r};n.controller.checkENS().then(r)},"catch":function(t){if(!t)return;var n=t.message||t;if(n.toLowerCase().indexOf("user denied")!==-1)return;return alert(n)},next:function(t){window.preventItem(t);if(t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var n=this.getState().step||0,r=n+1;if(!this["renderStep"+r]||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var i=this,s=function(){i.setState({step:r})};try{var o=this.controller["checkStep"+n]&&this.controller["checkStep"+n]();if(!o||!o.then)return s();o.then(s).catch(this.catch)}catch(t){this.catch(t)}},back:function(t){window.preventItem(t);var n=(this.getState().step||0)-1;if(n<0||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;this.setState({step:n})},getMetadataValues:function(){return window.getData(this.metadataPage)},renderMetadata:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome collection")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Discussion link"),React.createElement("input",{id:"discussionUri",type:"text"})),React.createElement("span",{className:"ExplBoom"},"A link to a forum, chat o community where people can interact about this project")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"DNS link"),React.createElement("input",{id:"externalDNS",type:"text"})),React.createElement("span",{className:"ExplBoom"},"A link to the official website of this project")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"ENS link"),React.createElement("input",{id:"externalENS",type:"text"})),React.createElement("span",{className:"ExplBoom"},"An ENS link to the official website of this project")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Repo link"),React.createElement("input",{id:"repoUri",type:"text"})),React.createElement("span",{className:"ExplBoom"},"A link to the official repo of this project")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Cover Regular",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at least 5mb lenght with a max with of 350px, due to users experience in IPFS download speed limitations")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Cover High Quality"),React.createElement("input",{id:"image_data",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the image")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence File"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf,.html,.md,.txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of all of ITEMs in the collection (if Any). Accepted file: .pdf, .html, .md, .txt"))))},renderStep0:function(){var t=this,n=this.getState();return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Let's start from the basics"),React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Name"),React.createElement("input",{type:"text",ref:function(r){return(t.collectionName=r)&&(r.value=n.collectionName||"")}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Symbol"),React.createElement("input",{type:"text",ref:function(r){return(t.collectionSymbol=r)&&(r.value=n.collectionSymbol||"")}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT"))))},renderStep1:function(){var t=this,n=this.getState(),r=n.extension;return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Who is the host?"),React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing"},React.createElement("span",{className:"createDescriptonX"},"The host of the collection is who have the ability to mint ITEMS, it can be anyone, an address or you can extend it with custom rules via deploying an extension conctract. ",React.createElement("a",{href:""},"More info"))),React.createElement("section",{className:"FormCreateThing"},React.createElement("select",{className:"",onChange:this.onExtension},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"wallet",selected:r==="wallet"},"Wallet"),React.createElement("option",{value:"contract",selected:r==="contract"},"Smart Contract"))),r==="wallet"&&React.createElement("section",{className:"FormCreateThing"},React.createElement("input",{type:"text",placeholder:"address",ref:function(n){return t.extensionAddressInput=n}}))),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT")))},renderStep2:function(){var t=this,n=this.getState(),r=n.extension;return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Granularity"),React.createElement("section",{className:"FormCreateThing"},React.createElement("label",null,React.createElement("p",null,"Decimals"),React.createElement("input",{type:"checkbox",ref:function(r){return(t.hasDecimals=r)&&(r.checked=n.hasDecimals)}})),React.createElement("span",{className:"ExplBoom"},"Selecting this option, all of the Items in this Collection will have 18 decimals in both implementations (Racomended only if you need decimals in the NFT implementation too due to some special functions like in-game consumable items)")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT")))},renderStep3:function(){var t=this,n=this.getState(),r=n.metadataType;return React.createElement("section",{className:"createCollection"},React.createElement("h2",null,"Metadata"),React.createElement("select",{className:"",onChange:this.onMetadataType},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"basic",selected:r==="basic"},"Basic"),React.createElement("option",{value:"custom",selected:r==="custom"},"Custom")),r==="basic"&&this.renderMetadata(),r==="custom"&&React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Metadata Link"),React.createElement("input",{type:"text",ref:function(n){return(t.metadataLinkInput=n)&&(n.value=t.state&&t.state.metadataLink||"")}}),React.createElement("span",{className:"ExplBoom"},"The metadata file is a Json standard file containing all of the info and links to the file of the ITEM. ",React.createElement("a",{href:"/doc.html#6",target:"_blank"},"here")," You can find a step by step guide to build your json file correctly. | Link must be expressed in ipfs://ipfs/0000000000..")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT")))},renderStep4:function(){var t=this,n=this.getState();if(n.loadingMessage===this.controller.deployingCollectionMessage)return React.createElement(FullLoader,null);var r=n.extension;return React.createElement("section",{className:"createCollection"},r==="contract"&&React.createElement("h2",null,"Etension Contract"),r!=="contract"&&React.createElement("h2",null,"Deploy"),r==="contract"&&React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing FormCreateThingBig"},React.createElement(Editor,{ref:function(n){return t.editor=n}}),React.createElement("button",{className:"BTNweirdo",ref:function(n){return t.compileButton=n},onClick:this.compile},"Compile"),React.createElement("select",{ref:function(n){return t.contractSelect=n}}),React.createElement("section",{className:"FormCreateThing"},React.createElement("input",{className:"payloadThing",type:"text",placeholder:"Payload if any",ref:function(n){return t.extensionAddressPayload=n}})))),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB"+(this.state&&this.state.performing?" disabled":""),href:"javascript:;",onClick:this.back},"BACK"),this.state&&!this.state.performing&&!this.state.extensionAddress&&React.createElement("a",{href:"javascript:;","data-action":"deploySmartContract",className:"SuperActionBTN",onClick:window.perform},"DEPLOY SMART CONTRACT"),this.state&&!this.state.performing&&this.state.extensionAddress&&React.createElement("a",{href:"javascript:;","data-action":"deploy",className:"SuperActionBTN",onClick:window.perform},"CREATE COLLECTION"),this.state&&this.state.performing&&React.createElement(InnerLoader,null),this.state&&this.state.loadingMessage&&React.createElement("span",null,this.state.loadingMessage),React.createElement("p",{className:"risksDisc"},"ETHITEM is a general purposes protocol to build ITEMs on top of Ethereun, anyone can do it! By deploying you're taking the full responsability for your creation, do it at your own risk.")))},render:function(){return this["renderStep"+(this.getState().step||0)]()}});var CreateItemWizardController=function(t){var n=this;n.view=t,n.newERC1155CreatedEvent="NewERC1155Created(address,uint256,address,address)",n.deployingItemMessage="Deploying Item",n.onTokenAddressChange=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:i.prev=0,e=window.web3.utils.toChecksumAddress(e),i.next=7;break;case 4:return i.prev=4,i.t0=i["catch"](0),i.abrupt("return",n.view.setState({selectedToken:null}));case 7:return i.next=9,window.loadSingleCollection(e);case 9:return r=i.sent,i.prev=10,i.next=13,window.blockchainCall(r.contract.methods.name);case 13:r.name=i.sent,i.next=18;break;case 16:i.prev=16,i.t1=i["catch"](10);case 18:return i.prev=18,i.next=21,window.blockchainCall(r.contract.methods.symbol);case 21:r.symbol=i.sent,i.next=26;break;case 24:i.prev=24,i.t2=i["catch"](18);case 26:return i.prev=26,i.next=29,window.blockchainCall(r.contract.methods.decimals);case 29:r.decimals=i.sent,i.next=34;break;case 32:i.prev=32,i.t3=i["catch"](26);case 34:return i.prev=34,i.t4=window.web3.utils,i.next=38,window.blockchainCall(r.contract.methods.extension);case 38:i.t5=i.sent,r.extension=i.t4.toChecksumAddress.call(i.t4,i.t5),i.next=44;break;case 42:i.prev=42,i.t6=i["catch"](34);case 44:return i.prev=44,i.next=47,window.blockchainCall(r.contract.methods.canMint,window.walletAddress);case 47:r.canMint=i.sent,i.next=52;break;case 50:i.prev=50,i.t7=i["catch"](44);case 52:return i.abrupt("return",n.view.setState({selectedToken:r}));case 53:case"end":return i.stop()}},t,this,[[0,4],[10,16],[18,24],[26,32],[34,42],[44,50]])}));return function(t){return e.apply(this,arguments)}}(),n.checkStep1=function(){var t=n.view.itemName.value,r=n.view.itemSymbol.value,i=n.view.itemSupply.value,s=n.view.itemMintable.checked;if(window.asNumber(i)<=0)throw"Supply must be a number greater than 0";n.view.setState({itemName:t,itemSymbol:r,itemSupply:i,itemMintable:s})},n.toDecimals=function(t,n){if(!t||!n)return;return t.decimals&&window.asNumber(t.decimals)>1&&(n=window.toDecimals(n,t.decimals)),n.split(",").join("")},n.checkMetadata=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e=n.view.getState();if(e.metadataType){s.next=3;break}throw"No metadata! Are you serious?";case 3:if(e.metadataType!=="custom"){s.next=15;break}return s.next=6,window.waitForLateInput();case 6:t=n.view.metadataLinkInput.value,s.t0=!t;if(s.t0){s.next=12;break}return s.next=11,window.checkMetadataLink(t);case 11:s.t0=!s.sent;case 12:if(!s.t0){s.next=14;break}throw"Not a valid metadata link!";case 14:return s.abrupt("return",n.view.setState({metadataLink:t}));case 15:return s.next=17,n.view.getMetadataValues();case 17:return i=s.sent,s.next=20,window.checkMetadataValuesForItem(i);case 20:if(s.sent){s.next=22;break}throw"Looks like you have insered some ivalid inputs as Metadata";case 22:n.view.setState({metadata:i});case 23:case"end":return s.stop()}},r,this)}));return t}(),n.performDeploy=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o,u,a,f,l,c,h,p,d,v,m,g;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,n.checkMetadata();case 2:e=n.view.getState(),t=n.toDecimals(e.selectedToken,e.itemSupply);if(!(parseInt(t)<=0)){y.next=6;break}throw"Supply must be greater than 0";case 6:n.view.setState({loadingMessage:"Uploading metadata"}),y.t0=e.metadataLink;if(y.t0){y.next=12;break}return y.next=11,window.uploadMetadata(e.metadata);case 11:y.t0=y.sent;case 12:return i=y.t0,n.view.setState({loadingMessage:n.deployingItemMessage}),y.next=16,window.blockchainCall(e.selectedToken.contract.methods.mint,t,e.itemName,e.itemSymbol,i,e.itemMintable);case 16:s=y.sent,n.view.emit("collections/refresh"),o=s.events,o instanceof Array||(o=Object.values(o)),u=window.web3.utils.toChecksumAddress(e.selectedToken.contract.options.address),a=[window.web3.utils.sha3("NewItem(uint256,address)"),window.web3.utils.sha3("Mint(uint256,address,uint256)")],l=o,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 23:if(!c){y.next=29;break}if(!(h>=l.length)){y.next=26;break}return y.abrupt("break",42);case 26:p=l[h++],y.next=33;break;case 29:h=l.next();if(!h.done){y.next=32;break}return y.abrupt("break",42);case 32:p=h.value;case 33:d=p;if(window.web3.utils.toChecksumAddress(d.address)===u){y.next=36;break}return y.abrupt("continue",40);case 36:if(a.indexOf(d.raw.topics[0])!==-1){y.next=38;break}return y.abrupt("continue",40);case 38:try{f=web3.eth.abi.decodeParameter("uint256",d.raw.topics[1])}catch(b){f=web3.eth.abi.decodeParameters(["uint256","address","uint256"],d.raw.data)[0]}return y.abrupt("break",42);case 40:y.next=23;break;case 42:return y.next=44,window.loadItemData({objectId:f,collection:e.selectedToken});case 44:return v=y.sent,y.next=47,window.AJAXRequest(window.formatLink(i));case 47:m=y.sent,g={name:m.name,image:m.image,external_url:m.external_url,collection:e.selectedToken,collectionAddress:u,item:v},g.created="item",n.view.emit("section/change","spa/successPage",g);case 51:case"end":return y.stop()}},r,this)}));return t}()};var CreateItemWizard=React.createClass({displayName:"CreateItemWizard",requiredScripts:["spa/innerLoader.jsx","spa/fullLoader.jsx"],getState:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,t},onFileOrFolder:function(t){window.preventItem(t);var n=this;this.setState({fileOrFolder:t.currentTarget.value},function(){n.fileOrFolder.directory=n.state.fileOrFolder==="folder",n.fileOrFolder.webkitdirectory=n.state.fileOrFolder==="folder"})},onChange:function(t){window.preventItem(t);if(this.state&&this.state.performing)return;var n=t.currentTarget.value,r=this[t.currentTarget.dataset.action],i=t.currentTarget.dataset.action+"Timeout";this[i]&&window.clearTimeout(this[i]),this[i]=setTimeout(function(){return r(n)},window.context.inputTimeout)},onTokenAddressChange:function(t){this.controller.onTokenAddressChange(t)},onMetadataType:function(t){this.setState({metadataType:t.currentTarget.value,metadataLink:null,metadata:null})},"catch":function(t){if(!t)return;var n=t.message||t;if(n.toLowerCase().indexOf("user denied")!==-1)return;return alert(n)},next:function(t){window.preventItem(t);if(t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var n=this.getState().step||0,r=n+1;if(!this["renderStep"+r]||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;var i=this,s=function(){i.setState({step:r})};try{var o=this.controller["checkStep"+n]&&this.controller["checkStep"+n]();if(!o||!o.then)return s();o.then(s).catch(this.catch)}catch(t){this.catch(t)}},back:function(t){window.preventItem(t);var n=(this.getState().step||0)-1;if(n<0||t.currentTarget.className.toLowerCase().indexOf("disabled")!==-1)return;this.setState({step:n})},getMetadataValues:function(){return window.getData(this.metadataPage)},renderMetadata:function(){var t=this,n=this.getState();return React.createElement("section",{className:"MetaDataThings",ref:function(r){return window.setData(t.metadataPage=r,n.metadata)}},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Description",React.createElement("b",null,"*")),React.createElement("textarea",{id:"description","data-mandatory":"true"})),React.createElement("span",{className:"ExplBoom"},"The description of this new awesome collection")),React.createElement("section",{className:"spacialImputs"},React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"ITEM Img Regular",React.createElement("b",null,"*")),React.createElement("input",{id:"image","data-mandatory":"true",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"The cover img must be .png or .gif and at least 5mb lenght with a max with of 350px, due to users experience in IPFS download speed limitations")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"ITEM Img HD"),React.createElement("input",{id:"image_data",type:"file",accept:"."+Object.keys(window.context.supportedImageFileExtensions).join(", .")})),React.createElement("span",{className:"ExplBoom"},"No limitations for the HQ version of the image")),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Background Color",React.createElement("b",null,"*")),React.createElement("input",{id:"background_color","data-mandatory":"true",type:"color"})),React.createElement("span",{className:"ExplBoom"},"The background color used in most of the dapps behind your cover if not fixed with their standard image sizes")),React.createElement("section",{className:"MetaImputThings"},React.createElement("section",{className:"createWhat"},React.createElement("p",null,"File or Folder"),React.createElement("select",{className:"FF",id:"fileType",onChange:this.onFileOrFolder},React.createElement("option",{value:"file"},"File"),React.createElement("option",{value:"folder"},"Folder")),React.createElement("input",{id:this.state&&this.state.fileOrFolder==="folder"?"folder":"file",ref:function(n){return t.fileOrFolder=n},type:"file",webkitdirectory:this.state&&this.state.fileOrFolder==="folder",directory:this.state&&this.state.fileOrFolder==="folder"}))),React.createElement("span",{className:"ExplBoom"},"The file or folder of the ITEM (if Any)."),React.createElement("section",{className:"MetaImputThings"},React.createElement("label",{className:"createWhat"},React.createElement("p",null,"Licence File"),React.createElement("input",{id:"licence_url",type:"file",accept:".pdf, .html, .md, .txt"})),React.createElement("span",{className:"ExplBoom"},"A file that represent the legal licence of the file (if Any). Accepted file: .pdf, .html, .md, .txt"))))},renderStep0:function(){var t=this,n=this.getState();return React.createElement("section",{className:"createITEM"},React.createElement("section",{className:"FormCreateThing"},React.createElement("h2",null,"Collection:"),React.createElement("input",{ref:function(r){return(t.tokenAddressInput=r)&&(r.value=n.selectedToken&&n.selectedToken.address||"")},className:"addressWrapSelector",type:"text",placeholder:"Token address","data-action":"onTokenAddressChange",onKeyUp:this.onChange,onChange:this.onChange})),n.selectedToken&&React.createElement("section",{className:"CollectionLoaded"},React.createElement("p",null,n.selectedToken.name," ",React.createElement("span",null," (",n.selectedToken.symbol,")")),!n.selectedToken.canMint&&React.createElement("span",null,"This Collection cannot be extended any more")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN"+(n.selectedToken&&n.selectedToken.canMint?"":" disabled"),href:"javascript:;",onClick:this.next},"NEXT")))},renderStep1:function(){var t=this;return React.createElement("section",{className:"createITEM"},React.createElement("h2",null,"Let's start from the basics"),React.createElement("section",{className:"FormCreate"},React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Name"),React.createElement("input",{type:"text",ref:function(n){return t.itemName=n}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Symbol"),React.createElement("input",{type:"text",ref:function(n){return(t.itemSymbol=n)&&(n.value=t.state.itemSymbol||t.state.selectedToken.symbol)}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Supply"),React.createElement("input",{type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",ref:function(n){return(t.itemSupply=n)&&(n.value=t.state.itemSupply||"")}})),React.createElement("section",{className:"FormCreateThing"},React.createElement("label",null,React.createElement("p",null,"You'll maintain the right to mint new?"),React.createElement("input",{type:"checkbox",ref:function(n){return(t.itemMintable=n)&&(n.checked=t.state.itemMintable)}}))),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB",href:"javascript:;",onClick:this.back},"BACK"),React.createElement("a",{className:"SuperActionBTN",href:"javascript:;",onClick:this.next},"NEXT"))))},renderStep2:function(){var t=this,n=this.getState();if(n.loadingMessage===this.controller.deployingItemMessage)return React.createElement(FullLoader,null);var r=n.metadataType;return React.createElement("section",{className:"createITEM"},React.createElement("section",{className:"FormCreate"},React.createElement("h2",null,"Metadata"),React.createElement("select",{className:"",onChange:this.onMetadataType},React.createElement("option",{value:""},"Select"),React.createElement("option",{value:"basic",selected:r==="basic"},"Basic"),React.createElement("option",{value:"custom",selected:r==="custom"},"Custom")),r==="basic"&&this.renderMetadata(),r==="custom"&&React.createElement("section",{className:"FormCreateThing"},React.createElement("p",null,"Metadata Link"),React.createElement("input",{type:"text",ref:function(n){return(t.metadataLinkInput=n)&&t.state&&t.state.metadataLink&&(n.value=t.state&&t.state.metadataLink)}}),React.createElement("span",{className:"ExplBoom"},"The metadata file is a Json standard file containing all of the info and links to the file of the ITEM. ",React.createElement("a",{href:"/doc.html#6",target:"_blank"},"here")," You can find a step by step guide to build your json file correctly. | Link must be expressed in ipfs://ipfs/0000000000..")),React.createElement("section",{className:"FormCreateThing"},React.createElement("a",{className:"SuperActionBTN SuperActionBTNB"+(this.state&&this.state.performing?" disabled":""),href:"javascript:;",onClick:this.back},"BACK"),(!this.state||this.state.performing!=="deploy")&&React.createElement("a",{href:"javascript:;","data-action":"deploy",className:"SuperActionBTN",onClick:window.perform},"DEPLOY"),this.state&&this.state.performing==="deploy"&&React.createElement(InnerLoader,null),this.state&&this.state.loadingMessage&&React.createElement("span",null,this.state.loadingMessage))))},componentDidMount:function(){this.props.collectionAddress&&this.controller.onTokenAddressChange(this.props.collectionAddress)},render:function(){return this["renderStep"+(this.getState().step||0)]()}});var EditorController=function(t){var n=this;n.view=t,n.loadContent=function(){function t(t,n,r){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t,i){var s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,n.view.emit("message","Retrieving Content Token..."),u.next=4,window.loadContent(e,t);case 4:s=u.sent,!n.view.props.secondCode&&!n.view.props.second&&n.view.editor.setValue(s);if(n.view.props.secondCode||n.view.props.second)o=n.view.editor.getModel(),o[i?"modified":"original"]=monaco.editor.createModel(s,"sol"),n.view.editor.setModel(o);n.view.contentTokenInput&&setTimeout(function(){return n.view.contentTokenInput.value=e}),n.view.emit("message"),u.next=14;break;case 11:u.prev=11,u.t0=u["catch"](0),n.view.emit("message",u.t0.message||u.t0,"error");case 14:case"end":return u.stop()}},r,this,[[0,11]])}));return t}(),n.tryCompile=function(){function t(t,n){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e,t){var i,s,o,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.view.emit("smartContract/compilation",undefined),n.view.emit("smartContract/compiling"),a.prev=2,i=n.view.editor.getValue(),s=window.extractComment(i),Object.keys(s).map(function(e){return n.view.emit("comment/changed",s[e],e)});if(i){a.next=15;break}if(!window.isEthereumAddress(n.view.functionalityAddressValue)){a.next=13;break}return t!==!0&&n.view.emit("message","Retrieving Solidity version..."),a.next=11,window.SolidityUtilities.getSolcVersion(n.view.functionalityAddressValue);case 11:n.view.solidityVersion.value=a.sent,t!==!0&&n.view.emit("message");case 13:return n.view.emit("smartContract/compilation",undefined),a.abrupt("return");case 15:if(!window.getCompleteCode){a.next=21;break}return a.next=18,window.getCompleteCode(i);case 18:a.t0=a.sent,a.next=22;break;case 21:a.t0=i;case 22:i=a.t0;if(window.isEthereumAddress(n.view.functionalityAddressValue)){a.next=31;break}return t!==!0&&n.view.emit("message","Compiling SmartContract..."),a.next=27,SolidityUtilities.compile(i,n.view.solidityVersion.value,e);case 27:return o=a.sent,t!==!0&&n.view.emit("message"),n.view.emit("smartContract/compilation",o),a.abrupt("return",o);case 31:return t!==!0&&n.view.emit("message","Comparing SmartContracts..."),a.next=34,window.SolidityUtilities.compare(n.view.functionalityAddressValue,i);case 34:return u=a.sent,u&&(n.view.solidityVersion.value=u.solcVersion),t!==!0&&n.view.emit("message"),n.view.emit("smartContract/compilation",u),a.abrupt("return",u);case 41:a.prev=41,a.t1=a["catch"](2),n.view.emit("smartContract/compilation",undefined),t!==!0&&n.view.emit("message",a.t1.message||a.t1,"error");case 45:case"end":return a.stop()}},r,this,[[2,41]])}));return t}()};var Editor=React.createClass({displayName:"Editor",requiredScripts:["assets/plugins/monaco.editor/monaco.editor.min.js"],getDefaultSubscriptions:function(){return{"solc/version/change":this.changeSolcVersion,"editor/compile":this.tryCompile}},onEditor:function(t){var n=this,r=this;if(!window.monaco)return setTimeout(function(){return r.onEditor(t)},300);t&&(r.props.secondCode===undefined||r.props.secondCode===null)&&(r.props.second===undefined||r.props.second===null)&&(r.editor=window.monaco.editor.create(t,{language:r.props.lang||"sol",theme:"vs-light",minimap:{enabled:!1},readOnly:r.props.readonly==="true"||r.props.firstCode!==undefined&&r.props.firstCode!==null||r.props.first!==undefined&&r.props.first!==null||r.props.link!==undefined&&r.props.link!==null,value:r.props.firstCode||""})).onDidChangeModelContent(function(){try{r.contentTokenInput&&(r.contentTokenInput.value=""),delete r.contentTokenValue}catch(e){}r.loadContentButton&&$(r.loadContentButton).removeClass("disabled");if(r.oneWay){delete r.oneWay;return}n.emit("smartContract/compilation",undefined)}),t&&(r.props.secondCode!==undefined&&r.props.secondCode!==null||r.props.second!==undefined&&r.props.second!==null)&&(r.editor=window.monaco.editor.createDiffEditor(t,{language:r.props.lang||"sol",theme:"vs-dark",minimap:{enabled:!1},readOnly:!0})).setModel({original:monaco.editor.createModel(r.props.firstCode||"","sol"),modified:monaco.editor.createModel(r.props.secondCode||"","sol")}),t&&r.props.link&&window.fetch(r.props.link,{mode:"no-cors"}).then(function(e){return e.text()}).then(function(e){return r.editor&&r.editor.setValue(e)}).catch(function(){return r.editor.setValue("Unable to show the code... Something shady is happening here.")}),t&&r.props.compileAtStart&&r.enqueue(r.tryCompile,500),t&&r.props.sourceLocationId&&r.loadContent(r.props.sourceLocationId,r.props.sourceLocation)},commentChanged:function(t,n){var r=window.putComment(this.editor.getValue(),n,t);r=window.putComment(r);var i=this;i.oneWay=!0,i.editor.setValue(r),setTimeout(function(){delete i.oneWay},300)},uploadFile:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target.files[0],r=this,i=new FileReader;i.addEventListener("load",function(){r.editor.setValue(Base64.decode(i.result.substring(i.result.indexOf(","))))},!1),i.readAsDataURL(n)},onChange:function(t){t&&t.preventDefault(!0)&&t.stopPropagation(!0);var n=t.target;n.dataset.change==="loadContent"&&delete this.contentTokenValue,n.dataset.change==="loadContent"&&this.loadContentButton&&$(this.loadContentButton).removeClass("disabled")},onKeyUp:function(t){if(!t||t.keyCode!==13)return this.onChange(t);t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if($(this[t.currentTarget.dataset.change+"Button"]).hasClass("disabled"))return;this[t.currentTarget.dataset.change]&&this[t.currentTarget.dataset.change](t),this.emit("editor/compile")},loadContent:function(t,n){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);if(t&&t.target&&$(t.target).hasClass("disabled"))return;delete this.contentTokenValue;var r=!t||t.target?this.contentTokenInput:t,i=isNaN(r)?parseInt(r.value):r;if(isNaN(i))return;var s=this;s.controller.loadContent(i,n).then(function(){s.contentTokenValue=i,s.loadContentButton&&$(s.loadContentButton).addClass("disabled"),s.contentTokenInput&&!isNaN(r)&&s.enqueue(function(){return s.contentTokenInput.value=""}),s.tryCompile()})},tryCompile:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0),this.controller.tryCompile(200,t)},onSolidityVersion:function(t){var n=this;if(!(n.solidityVersion=t))return;window.SolidityUtilities.getCompilers().then(function(e){return n.solidityVersion&&(n.solidityVersion.innerHTML=Object.keys(e.releases).map(function(t){return'<option value="'+e.releases[t]+'">'+t+"</option>"}).join(""))})},changeSolcVersion:function(t){this.solidityVersion.value=t},recoverData:function(){var t=this;return new Promise(function(e,n){var r=parseInt(t.contentTokenInput&&t.contentTokenInput.value||0),i=function s(){var i=t.functionalityAddress.value;if(window.isEthereumAddress(i))return e([r,i]);t.controller.deploy().then(s).catch(n)};return isNaN(r)?i():t.controller.mint().then(i).catch(n)})},componentDidMount:function(){window.editorShortcut=window.editorShortcut||$(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e&&e.preventDefault&&e.preventDefault(!0)&&e.stopPropagation&&e.stopPropagation(!0),$.publish("editor/compile")}}),!this.props.firstCode&&this.props.first&&this.controller.loadContent(this.props.first,this.props.firstLocation),!this.props.secondCode&&this.props.second&&this.controller.loadContent(this.props.second,this.props.secondLocation,!0)},render:function(){return React.createElement("section",{className:this.props.className},!this.props.readonly&&!this.props.firstCode&&!this.props.first&&!this.props.secondCode&&!this.props.second&&React.createElement("div",{className:"CodeEditorOptionsFrom"},React.createElement("p",{className:"CodeEditorOptionsWhat"},"Load: "),React.createElement("input",{className:"CodeEditorOptionsLoad",type:"file",onChange:this.uploadFile,accept:this.props.lang&&"."+this.props.lang||".sol"})),(this.props.readonly&&this.props.compileAtStart||!this.props.readonly&&!this.props.firstCode&&!this.props.first&&!this.props.secondCode&&!this.props.second)&&React.createElement("div",{className:"CodeEditorOptionsCoding"},React.createElement("p",{className:"CodeEditorOptionsWhat"},"Solidity: "),React.createElement("select",{id:"selectedSolidityVersion",className:"CodeEditorOptionsSelect",ref:this.onSolidityVersion})),React.createElement("section",{className:"NewProposaleditor",ref:this.onEditor}))}});var ExploreController=function(t){var n=this;n.view=t,n.onCollectionSearch=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(window.isEthereumAddress(e)){i.next=2;break}return i.abrupt("return",n.view.setState({searchedCollection:null}));case 2:e=window.web3.utils.toChecksumAddress(e);try{t=n.view.props.collections.filter(function(t){return t.address===e})[0]}catch(s){}if(t){i.next=8;break}return i.next=7,window.loadSingleCollection(e);case 7:t=i.sent;case 8:n.view.setState({searchedCollection:t});case 9:case"end":return i.stop()}},r,this)}));return t}()};var Explore=React.createClass({displayName:"Explore",getDefaultSubscriptions:function(){return{"collection/search":this.controller.onCollectionSearch}},requiredScripts:["spa/loader.jsx","spa/innerLoader.jsx","spa/lazyImageLoader.jsx","spa/fullLoader.jsx"],requiredModules:["spa/singleCollection"],onClick:function(t){window.preventItem(t);var n=t.currentTarget.dataset.key,r;n!==undefined&&n!==null&&(r=this.props.collections.filter(function(e){return e.key===n})[0]),this.emit("section/change","spa/collection",{collection:r})},componentDidMount:function(){window.setHomepageLink("?section=explore")},getCollections:function(){var t=window.getState(this),n=t.collections.filter(function(e){return e.category==="W20"});return n.push.apply(n,t.collections.filter(function(e){return e.category!=="W20"})),n},render:function(){var t=this,n=window.getState(this);return n.loadingCollections?React.createElement(FullLoader,null):React.createElement("section",{className:"Pager"},React.createElement("section",{className:"collections"},React.createElement("section",{className:"collectionsList"},n.searchedCollection&&React.createElement(SingleCollection,{collection:n.searchedCollection,collectionKey:n.searchedCollection.key,onClick:t.onClick,miniature:!0}),!n.searchedCollection&&n.collections&&this.getCollections().map(function(e){return React.createElement(SingleCollection,{collection:e,collectionKey:e.key,key:e.key,onClick:t.onClick,miniature:!0})}))))}});var FarmController=function(t){var n=this;n.view=t};var Farm=React.createClass({displayName:"Farm",componentDidMount:function(){window.setHomepageLink("?section=farm")},render:function(){return React.createElement("section",null,React.createElement("section",{className:"SoonFARM"},React.createElement("figure",{className:"FarmImg"},React.createElement("img",{src:"assets/img/farmer.png"})),React.createElement("h3",null,"Farm will available soon powered by ",React.createElement("a",{target:"_blank",href:"https://github.com/b-u-i-d-l/unifi"},"UniFi V2")," General Purposes Contracts")))}});var FullLoader=React.createClass({displayName:"FullLoader",render:function(){return React.createElement("section",{className:"LoaderFull"},React.createElement("figure",{className:"LoadImg"},React.createElement("img",{src:"assets/img/loadMonolith.png"})))}});var IndexController=function(t){var n=this;n.view=t,n.tryCheckAddressBarParams=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=window.consumeAddressBarParam("collection"),t=window.consumeAddressBarParam("interoperable");if(!!e||!!t){u.next=4;break}return u.abrupt("return");case 4:n.view.setState({loadingCollections:!0}),i=window.consumeAddressBarParam("item");if(!t){u.next=24;break}return s=window.newContract(window.context.IEthItemInteroperableInterfaceABI,t),u.next=10,window.blockchainCall(s.methods.objectId);case 10:return i=u.sent,u.prev=11,u.next=14,window.blockchainCall(s.methods.mainInterface);case 14:e=u.sent,u.next=24;break;case 17:return u.prev=17,u.t0=u["catch"](11),u.t1=window.web3.utils,u.next=22,window.blockchainCall(window.newContract(window.context.IERC20ItemWrapperABI,t).methods.mainWrapper);case 22:u.t2=u.sent,e=u.t1.toChecksumAddress.call(u.t1,u.t2);case 24:return u.next=26,window.loadSingleCollection(e);case 26:u.t3=u.sent,o={collection:u.t3},u.t4=o.objectId=i;if(!u.t4){u.next=33;break}return u.next=32,window.loadItemData(o);case 32:o.item=u.sent;case 33:return n.view.emit("section/change","spa/"+(o.item?"item":"collection"),o),u.abrupt("return",!0);case 35:case"end":return u.stop()}},r,this,[[11,17]])}));return t}(),n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.ethItemOrchestrator=window.newContract(window.context.ethItemOrchestratorABI,window.getNetworkElement("ethItemOrchestratorAddress")),t.prev=1,t.t0=window,t.t1=window.context.KnowledgeBaseABI,t.next=6,window.blockchainCall(window.ethItemOrchestrator.methods.knowledgeBase);case 6:t.t2=t.sent,window.currentEthItemKnowledgeBase=t.t0.newContract.call(t.t0,t.t1,t.t2),t.next=12;break;case 10:t.prev=10,t.t3=t["catch"](1);case 12:return t.prev=12,t.t4=window,t.t5=window.context.IEthItemFactoryABI,t.next=17,window.blockchainCall(window.ethItemOrchestrator.methods.factory);case 17:t.t6=t.sent,window.currentEthItemFactory=t.t4.newContract.call(t.t4,t.t5,t.t6),t.next=23;break;case 21:t.prev=21,t.t7=t["catch"](12);case 23:return t.prev=23,t.t8=window,t.t9=window.context.W20ABI,t.next=28,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.erc20Wrapper);case 28:t.t10=t.sent,window.currentEthItemERC20Wrapper=t.t8.newContract.call(t.t8,t.t9,t.t10),t.next=34;break;case 32:t.prev=32,t.t11=t["catch"](23);case 34:try{window.ENSController=window.newContract(window.context.ENSABI,window.context.ENSControllerAddres)}catch(r){}return t.next=37,n.tryCheckAddressBarParams();case 37:return t.next=39,n.loadCollections(!0);case 39:case"end":return t.stop()}},r,this,[[1,10],[12,21],[23,32]])}));return t}(),n.loadCollections=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;return regeneratorRuntime.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return e&&n.view.setState({collections:null}),(!n.view.state||!n.view.state.collections)&&n.view.setState({loadingCollections:!0}),t={},Object.entries(window.context.ethItemFactoryEvents).forEach(function(e){return t[window.web3.utils.sha3(e[0])]=e[1]}),i=[Object.keys(t)],N.next=7,window.blockchainCall(window.ethItemOrchestrator.methods.factories);case 7:return s=N.sent,o=[],N.next=11,window.loadBlockSearchTranches();case 11:u=N.sent,a=function(t){return new Promise(function(e,r){o.push.apply(o,t),n.view.setState({collections:o},function(){return n.refreshCollectionData(t).then(e).catch(r)})})},f=[],l=u,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 15:if(!c){N.next=21;break}if(!(h>=l.length)){N.next=18;break}return N.abrupt("break",51);case 18:p=l[h++],N.next=25;break;case 21:h=l.next();if(!h.done){N.next=24;break}return N.abrupt("break",51);case 24:p=h.value;case 25:return d=p,v=[],N.next=29,window.getLogs({address:s,topics:i,fromBlock:d[0],toBlock:d[1]});case 29:m=N.sent,g=m,y=Array.isArray(g),b=0,g=y?g:g[Symbol.iterator]();case 31:if(!y){N.next=37;break}if(!(b>=g.length)){N.next=34;break}return N.abrupt("break",48);case 34:w=g[b++],N.next=41;break;case 37:b=g.next();if(!b.done){N.next=40;break}return N.abrupt("break",48);case 40:w=b.value;case 41:E=w,S=window.web3.eth.abi.decodeParameter("address",E.topics[1]),x=window.web3.utils.toChecksumAddress(window.web3.eth.abi.decodeParameter("address",E.topics[E.topics.length-1])),T=t[E.topics[0]],v.push(window.packCollection(x,T,S));case 46:N.next=31;break;case 48:f.push(a(v));case 49:N.next=15;break;case 51:return N.next=53,Promise.all(f);case 53:n.view.setState({loadingCollections:null});case 54:case"end":return N.stop()}},r,this)}));return t}(),n.refreshCollectionData=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o,u,a;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e=e||n.view.state.collections;if(e){f.next=3;break}return f.abrupt("return");case 3:t=[],i=e,s=Array.isArray(i),o=0,i=s?i:i[Symbol.iterator]();case 5:if(!s){f.next=11;break}if(!(o>=i.length)){f.next=8;break}return f.abrupt("break",19);case 8:u=i[o++],f.next=15;break;case 11:o=i.next();if(!o.done){f.next=14;break}return f.abrupt("break",19);case 14:u=o.value;case 15:a=u,t.push(window.refreshSingleCollection(a,n.view));case 17:f.next=5;break;case 19:return f.next=21,Promise.all(t);case 21:n.view.setState({collections:n.view.state.collections});case 22:case"end":return f.stop()}},r,this)}));return t}()};var Index=React.createClass({displayName:"Index",requiredModules:["spa/menu","spa/wallet"],requiredScripts:["spa/connect.jsx","spa/fullLoader.jsx"],getDefaultSubscriptions:function(){return{"ethereum/update":this.controller.loadData,"ethereum/ping":this.controller.refreshCollectionData,"collections/refresh":this.controller.loadCollections,"section/change":this.sectionChange,"wallet/toggle":this.toggleWallet}},toggleWallet:function(t){var n=t;if(n===undefined||n===null)n=!this.state||!this.state.wallet;n&&$("body").addClass("noScroll"),!n&&$("body").removeClass("noScroll"),this.setState({wallet:n})},componentDidMount:function(){var t=this;this.controller.loadData().then(function(){return t.emit("wallet/update")})},sectionChange:function(t,n){var r=this,i=t.split("/");i=i[i.length-1].firstLetterToUpperCase(),ReactModuleLoader.load({modules:[t],callback:function(){return r.setState({section:i,props:n},function(){return r.toggleWallet(!1)})}})},render:function(){var t={};return this.props&&Object.entries(this.props).forEach(function(e){return t[e[0]]=e[1]}),this.state&&Object.entries(this.state).forEach(function(e){return t[e[0]]=e[1]}),t.props&&Object.entries(t.props).forEach(function(e){return t[e[0]]=e[1]}),delete t.props,window.walletAddress?React.createElement("section",null,React.createElement("section",null,React.createElement("section",{className:"NoMobileForNow"},React.createElement("p",null,React.createElement("b",null,"Mobile Version is not supported jet :(")),React.createElement("p",null,"Use your pc or come back in the next days, we'll deliver it asap!")),React.createElement(Menu,{onSelection:this.sectionChange})),t.section&&React.createElement("section",null,React.createElement(window[t.section],t)),React.createElement(Wallet,t),React.createElement("footer",null,React.createElement("section",null,React.createElement("a",{target:"_blank",href:"https://github.com/b-u-i-d-l/ethItem"},"Github"),React.createElement("a",{target:"_blank",href:"/doc.html"},"Documentation"),React.createElement("a",{target:"_blank",href:"https://dapp.dfohub.com/?addr=0x7cB2Aa86fC0F3dA708783168BFd25B80F045d183"},"ETHITEM Governance"),React.createElement("a",{target:"_blank"},"ARTE token Farm"),React.createElement("a",{href:"https://dfohub.com"},"DFOhub"),React.createElement("a",{href:"javascript:;","data-section":"explore",onclick:"window.connectFromHomepage(this)",target:"_blank"},"Explore Items"),React.createElement("a",{href:"javascript:;","data-section":"wrap",onclick:"window.connectFromHomepage(this)",target:"_blank"},"Wrap to Items"),React.createElement("a",{href:"javascript:;","data-section":"create",onclick:"window.connectFromHomepage(this)",target:"_blank"},"Create Items"),React.createElement("a",{href:"javascript:;","data-section":"farm",onclick:"window.connectFromHomepage(this)",target:"_blank"},"Farm Items"),React.createElement("a",{target:"_blank",href:"https://whereismydragon.com",className:"Brandized"},"Where is my dragon?")),React.createElement("section",null,React.createElement("p",null,"ETHITEM is a new protocol on top of Ethereum, it's an R&D project made by the dfohub team. Use it at your own risk!")))):React.createElement(Connect,null)}});var InnerLoader=React.createClass({displayName:"InnerLoader",render:function(){return React.createElement("span",null,"Loading...")}});var ItemController=function(t){var n=this;n.view=t,n.performMint=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=n.view.mintMoreInput.value.split(",").join(""),t=window.asNumber(e);if(!(isNaN(t)||t<=0)){o.next=4;break}throw"Amount to mint must be a number greater than 0";case 4:return i=window.asNumber(n.view.props.item.collection.decimals),s=i===1?e:window.toDecimals(e,i),o.next=8,window.blockchainCall(n.view.props.item.collection.contract.methods["mint(uint256,uint256)"],n.view.props.item.objectId,s);case 8:window.updateItemDynamicData(this.props.item,n.view),n.view.emit("collections/refresh");case 10:case"end":return o.stop()}},r,this)}));return t}(),n.performUnwrap=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=n.view.unwrapInput.value.split(",").join(""),t=window.asNumber(e);if(!(isNaN(t)||t<=0)){o.next=4;break}throw"Amount to unwrap must be a number greater than 0";case 4:i=window.asNumber(n.view.props.item.collectionDecimals),s=i===1?e:window.toDecimals(e,i);if(!(window.asNumber(s)>window.asNumber(n.view.props.item.dynamicData.balanceOfCollectionSide))){o.next=8;break}throw"You specified an insufficient amount";case 8:return o.next=10,window.blockchainCall(n.view.props.item.collection.contract.methods.burn,n.view.props.item.objectId,s);case 10:window.updateItemDynamicData(this.props.item,n.view),n.view.emit("collections/refresh");case 12:case"end":return o.stop()}},r,this)}));return t}()};var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Item=React.createClass({displayName:"Item",requiredScripts:["spa/lazyImageLoader.jsx","spa/innerLoader.jsx","spa/loader.jsx"],requiredModules:["spa/editor"],getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return window.loadItemData(undefined,undefined,t)},"ethereum/ping":function(){return window.updateItemDynamicData(undefined,t)}}},onClick:function(t){window.preventItem(t),this.emit("section/change","spa/collection",{collection:this.props.collection})},toggle:function e(t){window.preventItem(t);var n=this.state&&this.state.toggle,e=t.currentTarget.innerHTML.toLowerCase();e=n===e?null:e,this.setState({toggle:e})},renderMetadata:function(t){var n=this.state&&this.state.item||this.props.item,r=Object.keys(n.metadata);r=t?r.filter(function(e){return window.context.allowedMetadataFields.indexOf(e)===-1}):r.filter(function(e){return window.context.allowedMetadataFields.indexOf(e)!==-1});var i={};return r.forEach(function(e){return i[e]=n.metadata[e]}),this.renderMetadataObject(i,!1,t)},renderMetadataValue:function(t,n){if(t instanceof Array)return this.renderMetadataArray(t,n);if((typeof t=="undefined"?"undefined":_typeof(t)).toLowerCase()==="object")return this.renderMetadataObject(t);var r=React.createElement("section",{className:"subMetaValue"},t);return(typeof t=="undefined"?"undefined":_typeof(t)).toLowerCase()==="string"&&t.length>30&&(r=React.createElement("p",{className:"subMetaValueString",ref:function(n){return n&&(n.innerHTML=window.convertTextWithLinksInHTML(t))}})),(typeof t=="undefined"?"undefined":_typeof(t)).toLowerCase()==="string"&&(t.toLowerCase().indexOf("http")===0||t.toLowerCase().indexOf("ipfs")===0||t.indexOf("//")===0)&&(r=React.createElement("a",{className:"subMetaValueLink",href:window.formatLink(t),target:"_blank"},window.shortenWord(t,30))),n?this.renderShowButton(r):r},renderMetadataObject:function(t,n,r){var i=this,s=Object.entries(t).map(function(e){return React.createElement("section",{className:"subMetaValueList",key:e[0]},React.createElement("section",{className:"subMetaValueOpen"},n||r?e[0]:window.normalizeName(e[0])),i.renderMetadataValue(e[1],n||r))});return n?this.renderShowButton(s):s},renderMetadataArray:function(t,n){var r=this,i=React.createElement("ul",{className:"subMetaValueArrayList"},t.map(function(e,t){return React.createElement("li",{key:t},r.renderMetadataValue(e))}));return n?this.renderShowButton(i):i},renderShowButton:function(t){var n;t.props=t.props||{},t.props.style=t.props.style||{},t.props.style.display="none";var r=t.ref;t.ref=function(e){n=e,r&&r(e)};var i=function(t){window.preventItem(t),t.currentTarget.innerHTML=t.currentTarget.innerHTML==="Show"?"Hide":"Show",n.style.display=t.currentTarget.innerHTML==="Show"?"none":"inline-block"};return React.createElement("section",null,React.createElement("a",{className:"swowThis",href:"javascript:;",onClick:i},"Show"),t)},max:function(t){window.preventItem(t),this.unwrapInput.value=this.props.item.dynamicData.balanceOfCollectionSidePlain.split(",").join()},componentDidMount:function(){window.setHomepageLink("?interoperable="+this.props.item.address);var t=this;window.retrieveWrappedCode(this.props.item).then(function(){return t.forceUpdate()})},render:function(){var t=this,n=this.state&&this.state.item||this.props.item,r=this.state?this.state.toggle:n.metadata?"metadata":"farm";return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"returntocollection"},React.createElement("a",{href:"javascript:;",onClick:this.onClick},React.createElement("img",{src:window.getElementImage(this.props.collection)})," ← From the ",React.createElement("b",null,this.props.collection.name," ",React.createElement("span",null,"(",this.props.collection.symbol,")"))," collection")),React.createElement("section",{className:"itemPage"},React.createElement("section",{className:"itemPageInfo"},React.createElement("figure",{className:"itemIcon"},React.createElement(LazyImageLoader,{src:window.getElementImage(n)})),React.createElement("article",{className:"itemInfo"},React.createElement("section",{className:"itemFundamentals"},React.createElement("h3",{className:"ItemTitle"},n.name," ",React.createElement("span",null," (",n.symbol,")")),React.createElement("section",{className:"itemFundamentalsThing"},React.createElement("h5",{className:"itemaddress"},React.createElement("a",{target:"_blank",href:window.context.openSeaItemLinkTemplate.format(this.props.collection.address,n.objectId)},"NFT Address")),React.createElement("h5",{className:"itemaddress"},React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"token/"+n.address},"ERC20 Address"))),React.createElement("section",{className:"collectionInfoSide"},React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",onClick:window.copyHREF,href:window.getHomepageLink("?wrappedItem="+this.props.item.address),className:"collectionLink collectionLinkS BrandizedS superlink"},"Copy Link"))),React.createElement("section",{className:"collectionInfoSideLinks"},this.props.collection.licence_url&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.licence_url),className:"collectionLink"},"Collection Licence")),this.props.item.licence_url&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.item.licence_url),className:"collectionLink"},"Item Licence"))),React.createElement("section",{className:"itemFundamentalsThing"},n.dynamicData&&n.dynamicData.isEditable&&n.collection.extensionAddress&&n.collection.extensionAddress!==window.voidEthereumAddress&&React.createElement("span",{className:"HostInfo"},"Host ",n.collection.extensionIsContract?"Contract":"Wallet",": ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+n.collection.extensionAddress},window.shortenWord(n.collection.extensionAddress,6))),(n.sourceAddress!=="blank"&&n.sourceAddress!==window.voidEthereumAddress||n.collection.sourceAddress!=="blank")&&React.createElement("span",{className:"HostInfo"},"Wrapped from: ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+(n.sourceAddress!=="blank"?n.sourceAddress:n.collection.sourceAddress)},n.sourceAddress!=="blank"?n.sourceAddress:window.shortenWord(n.collection.sourceAddress,6))),React.createElement("section",{className:"itemSide"},React.createElement("span",{className:"ItemSupply"},"Supply: ",window.fromDecimals(n.dynamicData.totalSupply,n.decimals)," "),window.walletAddress&&n.dynamicData&&n.dynamicData.balanceOf&&n.dynamicData.balanceOf!=="0"&&React.createElement("span",{className:"ItemBalance"},"| You own: ",window.formatMoney(window.fromDecimals(n.dynamicData.balanceOf,n.decimals,!0),2)),React.createElement("br",null),React.createElement("a",{className:"ItemPrice",target:"_blank",href:window.context.uniswapSpawUrlTemplate.format(n.address)},"🦄 $ ",n.dynamicData.tokenPriceInDollarsOnUniswap?window.formatMoney(n.dynamicData.tokenPriceInDollarsOnUniswap,1):"--"),React.createElement("a",{className:"ItemPrice",target:"_blank",href:window.context.uniswapInfoUrlTemplate.format(n.address)},"🐧 Info"),React.createElement("a",{className:"ItemPrice",target:"_blank",href:window.context.openSeaItemLinkTemplate.format(this.props.collection.address,n.objectId)},"⛵ $ ",n.dynamicData.tokenPriceInDollarsOnOpenSea?window.formatMoney(n.dynamicData.tokenPriceInDollarsOnOpenSea,1):"--"),this.props.item.dynamicData&&this.props.item.dynamicData.canMint&&React.createElement("section",{className:"SettingsForOwn"},React.createElement("label",null,React.createElement("input",{type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",ref:function(n){return t.mintMoreInput=n}})),(!this.state||this.state.performing!=="mint")&&React.createElement("a",{className:""+(this.state&&this.state.performing?" disabled":""),href:"javascript:;","data-action":"mint",onClick:window.perform},"Mint"),this.state&&this.state.performing==="mint"&&React.createElement(InnerLoader,null)),this.props.item.collection.category!=="Native"&&this.props.item.dynamicData&&parseFloat(this.props.item.dynamicData.balanceOfCollectionSidePlain)>0&&React.createElement("section",{className:"SettingsForOwn"},React.createElement("label",null,React.createElement("a",{className:"MaximumBro",href:"javascript:;",onClick:this.max},"Max"),React.createElement("input",{type:"text",placeholder:"0.00",spellcheck:"false",autocomplete:"off",autocorrect:"off",inputmode:"decimal",pattern:"^[0-9][.,]?[0-9]$",ref:function(n){return t.unwrapInput=n}})),(!this.state||this.state.performing!=="unwrap")&&React.createElement("a",{className:""+(this.state&&this.state.performing?" disabled":""),href:"javascript:;","data-action":"unwrap",onClick:window.perform},"Unwrap"),this.state&&this.state.performing==="unwrap"&&React.createElement(InnerLoader,null))))),window.renderExpandibleElement(n.description?window.convertTextWithLinksInHTML(n.description):"No description available",React.createElement("p",{className:"itemDesc"})),n.metadataMessage&&React.createElement("p",{className:"itemDesc",ref:function(t){return t&&(t.innerHTML=n.metadataMessage)}}))),React.createElement("section",{className:"collectionNav"},React.createElement("ul",null,n.metadata&&React.createElement("li",{className:r==="metadata"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle},"METADATA")),React.createElement("li",{className:r==="farm"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle},"FARM")),(this.props.item.collection.extensionCode||this.props.item.collection.modelCode||this.props.item.collection.wrappedCode)&&React.createElement("li",{className:r==="code"?"selected":undefined},React.createElement("a",{href:"javascript:;",onClick:this.toggle,"data-toggle":"code"},"CODE")))),React.createElement("section",{className:"ItemStuff"},r==="metadata"&&React.createElement("section",{className:"ItemData"},React.createElement("section",{className:"ItemStuffOpen"}),this.renderMetadata(),this.renderMetadata(!0)),r==="code"&&React.createElement("section",{className:"collectionPageItemsCode"},this.props.item.collection.extensionCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Extension ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+this.props.collection.address}," (Etherscan)")),React.createElement(Editor,{readonly:!0,firstCode:this.props.item.collection.extensionCode})),this.props.item.collection.modelCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Main Interface ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+this.props.collection.address}," (Etherscan)")),React.createElement(Editor,{readonly:!0,firstCode:this.props.item.collection.modelCode})),this.props.item.collection.wrappedCode&&React.createElement("section",{className:"CodePART"},React.createElement("h3",null,"Interoperable Interface ",React.createElement("a",{target:"_blank",href:window.getNetworkElement("etherscanURL")+"address/"+this.props.collection.address}," (Etherscan)")),React.createElement(Editor,{readonly:!0,firstCode:this.props.item.collection.wrappedCode}))),r==="farm"&&React.createElement("section",{className:"ItemFarm"},React.createElement("section",null,React.createElement("section",{className:"SoonFARM"},React.createElement("figure",{className:"FarmImg"},React.createElement("img",{src:"assets/img/farmer.png"})),React.createElement("h3",null,"Farm will available soon powered by ",React.createElement("a",{target:"_blank",href:"https://github.com/b-u-i-d-l/unifi"},"UniFi V2")," General Purposes Contracts")))))))}});var LazyImageLoader=React.createClass({displayName:"LazyImageLoader",onLoad:function(){this.loader&&(this.loader.style.display="none"),this.image&&(this.image.style.display="inline-block")},render:function(){var t=this;return React.createElement("section",null,React.createElement("section",{className:"LoadImg",ref:function(n){return t.loader=n}},React.createElement("img",{src:"assets/img/loadMonolith.png"})),React.createElement("img",{src:window.formatLink(this.props.src),ref:function(n){return t.image=n},style:{display:"none"},onLoad:this.onLoad}))}});var Loader=React.createClass({displayName:"Loader",render:function(){return React.createElement("figure",{className:"LoadImg"},React.createElement("img",{src:"assets/img/loadMonolith.png"}))}});var MenuController=function(t){var n=this;n.view=t,n.loadData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.AJAXRequest("data/menu.json");case 2:e=s.sent,t=0,i=n.onSection();try{t=e.indexOf(e.filter(function(e){return i?e.module===i:e.selected})[0])}catch(o){}n.view.setState({menu:e,selected:t},function(){n.view.onSelection({currentTarget:{dataset:{index:t}}})});case 7:case"end":return s.stop()}},r,this)}));return t}(),n.onSection=function(){var t=window.consumeAddressBarParam("section");return window.context.domainData&&window.location.hostname.indexOf(window.context.domainData.name)!==-1&&(t=window.location.hostname.split(".")[0],t=window.context.domainData.sections[t]),t}};var Menu=React.createClass({displayName:"Menu",getDefaultSubscriptions:function(){return{"section/change":this.onSection}},onSection:function(t){this.setState({selected:this.state.menu.indexOf(this.state.menu.filter(function(e){return e.module===t||e.otherModules&&e.otherModules.filter(function(e){return e===t}).length>0})[0])})},componentDidMount:function(){this.controller.loadData()},onSelection:function(t){t&&t.preventDefault&&t.preventDefault(!0)&&t.stopPropagation&&t.stopPropagation(!0);var n=this;n.setState({selected:t.currentTarget.dataset.index},function(){n.state.menu[n.state.selected]&&n.props.onSelection(n.state.menu[n.state.selected].module)})},onCollectionAddress:function(t){window.preventItem(t),this.emit("collection/search",this.searchInput.value)},render:function(){var t=this,n=this;return React.createElement("section",{className:"menuMenu"},React.createElement("a",{className:"logo"},React.createElement("section",{className:"logoimg"}),React.createElement("span",{className:"BrandizedSSxY"}," ETHITEM")),React.createElement("section",{className:"menuSelections"},this.state&&this.state.menu&&this.state.menu.map(function(e,r){return React.createElement("section",{className:"menuSelection",key:e.module},React.createElement("a",{href:"javascript:;","data-index":r,className:"menuSelection BrandizedSSx"+(r+""==t.state.selected+""?" Selected":""),onClick:n.onSelection},e.name))}),React.createElement("section",{className:"menuSelection"},React.createElement("a",{target:"_blank",href:"/doc.html",className:"menuSelection BrandizedSSx"},"Doc"))),React.createElement("section",{className:"search"},React.createElement("input",{ref:function(n){return t.searchInput=n},type:"search","data-action":"onCollectionAddress",onChange:window.onTextChange,onKeyUp:window.onTextChange}),React.createElement("a",{href:"javascript:;",onClick:this.onCollectionAddress},"↵")),!window.walletAddress&&React.createElement("a",{className:"connectWallet Brandized",href:"javascript:;",onClick:window.ethereum.enable},"CONNECT"),window.walletAddress&&React.createElement("a",{className:"connectWallet",href:"javascript:;",onClick:function(){return t.emit("wallet/toggle")}},React.createElement("img",{src:window.makeBlockie(window.walletAddress)}),React.createElement("span",null,window.shortenWord(window.walletAddress,5,!0)," ←")))}});var SearchController=function(t){var n=this;n.view=t};var Search=React.createClass({displayName:"Search",render:function(){return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"searchPage"},React.createElement("section",{className:"searchPageCollection"},React.createElement("h2",null,"COLLECTIONS")),React.createElement("section",{className:"searchPageITEMS"},React.createElement("h2",null,"ITEMS"))))}});var SingleCollectionController=function(t){var n=this;n.view=t,n.loadData=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.props.showItemsCount&&n.loadItemsCount(e);case 1:case"end":return r.stop()}},r,this)}));return t}(),n.loadItemsCount=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.loadCollectionItems(e.props.collection.address);case 2:t=r.sent,e.setState({itemsCount:t.length}),e.props.onCollectionObjectIds&&e.props.onCollectionObjectIds(t);case 5:case"end":return r.stop()}},n,this)}));return t}()};var SingleCollection=React.createClass({displayName:"SingleCollection",requiredScripts:["spa/loader.jsx","spa/innerLoader.jsx","spa/lazyImageLoader.jsx"],getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return t.controller.loadData(t)}}},componentDidMount:function(){this.controller.loadData(this)},renderCollectionProblems:function(t){return React.createElement("p",null,React.createElement("h4",null,"Some error where found in this collection:"),t.map(function(e){return React.createElement("span",null,e)}))},render:function(){var t=this,n=[React.createElement(Loader,null)];return this.props.collection&&(n=[React.createElement("figure",{className:"collectionIcon"},React.createElement(LazyImageLoader,{src:window.getElementImage(this.props.collection)}),this.props.collection.isOwner&&React.createElement("h6",null,"Host")),React.createElement("article",{className:"collectionInfo"},!this.props.miniature&&React.createElement("h3",{className:"collectionTitle"},this.props.collection.name," ",React.createElement("span",null,"(",this.props.collection.symbol,")")),this.props.miniature&&React.createElement("h3",{className:"collectionTitle"},window.shortenWord(this.props.collection.name,25)," ",React.createElement("span",null,"(",window.shortenWord(this.props.collection.symbol,6),")")),!this.props.miniature&&window.renderExpandibleElement(this.props.collection.description?window.convertTextWithLinksInHTML(this.props.collection.description):"No description available",React.createElement("p",{className:"collectionDesc"})),this.props.miniature&&React.createElement("p",{className:"collectionDesc"},this.props.collection.description?window.shortenWord(this.props.collection.description,100):"No description available"),!this.props.miniature&&this.props.collection.metadataMessage&&React.createElement("p",{className:"collectionDesc",ref:function(n){return n&&(n.innerHTML=t.props.collection.metadataMessage)}}),React.createElement("section",{className:"collectionInfoSide"},this.props.showItemsCount&&React.createElement("span",{className:"collectionItems BrandizedS"},(!this.state||this.state.itemsCount!==0&&!this.state.itemsCount)&&React.createElement(InnerLoader,null),this.state&&this.state.itemsCount>0&&this.state.itemsCount+" ITEMS"),!this.props.miniature&&React.createElement("p",null,"Version: ",React.createElement("b",null,this.props.collection.category+"_"+this.props.collection.standardVersion+"."+this.props.collection.erc20WrappedItemVersion+"."+this.props.collection.modelVersion)),this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",onClick:window.copyHREF,href:window.getHomepageLink("?collection="+this.props.collection.address),className:"collectionLink superlink"},"Copy Link"))),React.createElement("section",{className:"collectionInfoSideLinks"},this.props.collection.externalDNS&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.externalDNS),className:"collectionLink"},"External DNS")),this.props.collection.externalENS&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.externalENS),className:"collectionLink"},"External ENS")),this.props.collection.repoUri&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.repoUri),className:"collectionLink"},"Repo")),this.props.collection.licence_url&&this.props.showLink&&React.createElement("span",{className:"ItemCollectionLink"},React.createElement("a",{target:"_blank",href:window.formatLink(this.props.collection.licence_url),className:"collectionLink"},"Licence"))))]),this.props.onClick&&(n=React.createElement("a",{href:"javascript:;","data-key":this.props.collectionKey,onClick:this.props.onClick},n)),React.createElement("section",{className:this.props.className||"collection"},n)}});var SuccessPageController=function(t){var n=this;n.view=t};var SuccessPage=React.createClass({displayName:"SuccessPage",requiredScripts:["spa/lazyImageLoader.jsx"],createItem:function(t){window.preventItem(t),this.emit("section/change","spa/create",{create:"CreateItemWizard",collectionAddress:this.props.collectionAddress})},wrapItem:function(t){window.preventItem(t),this.emit("section/change","spa/wrap")},goToItem:function(t){window.preventItem(t),this.emit("section/change","spa/item",{collection:this.props.collection,item:this.props.item})},goToCollection:function(t){window.preventItem(t),this.emit("section/change","spa/collection",{collection:this.props.collection})},render:function(){var t=window.getState(this);return React.createElement("section",{className:"Pager yeahPage"},t.created==="collection"&&React.createElement("section",{className:"AllDoneBro"},React.createElement("h2",null,t.name," is now a real thing!"),React.createElement("figure",null,React.createElement(LazyImageLoader,{src:window.formatLink(t.image)})),React.createElement("p",null,"Spread the word using this link ",React.createElement("a",{onClick:window.copyHREF,href:window.getHomepageLink("?collection="+this.props.collection.address),target:"_blank"},window.getHomepageLink("?collection="+this.props.collection.address))),React.createElement("h2",null,"And now?"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.createItem},"Create the first Item"),React.createElement("p",null,React.createElement("a",{href:"javascript:;",onClick:this.goToCollection},"Go to the Collection page"))),t.created==="item"&&React.createElement("section",{className:"AllDoneBro"},React.createElement("h2",null,"You have successfully created this amazing new ITEM!"),React.createElement("figure",null,React.createElement(LazyImageLoader,{src:window.formatLink(t.image)})),React.createElement("p",null,"Spread the word using this link ",React.createElement("a",{onClick:window.copyHREF,href:window.getHomepageLink("?wrappedItem="+this.props.item.address),target:"_blank"},window.getHomepageLink("?wrappedItem="+this.props.item.address))),React.createElement("h2",null,"And now?"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.createItem},"Create another Item"),React.createElement("p",null,React.createElement("a",{href:"javascript:;",onClick:this.goToItem},"Go to the ITEM page"))),t.created==="wrap"&&React.createElement("section",{className:"AllDoneBro"},React.createElement("h2",null,"You have successfully wrapped ",t.tokenAmount," ",t.name),React.createElement("h2",null,"And now?"),React.createElement("a",{className:"Enter",href:"javascript:;",onClick:this.wrapItem},"Wrap another Item"),React.createElement("p",null,React.createElement("a",{href:"javascript:;",onClick:this.goToItem},"Go to the ITEM page"))))}});var WalletController=function(t){var n=this;n.view=t,n.loadData=function(){function r(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function i(){var e,r,s,o,u,a,f,l,c,h,p,d;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:v.prev=0,e=[],r=t.props.collections,s=Array.isArray(r),o=0,r=s?r:r[Symbol.iterator]();case 3:if(!s){v.next=9;break}if(!(o>=r.length)){v.next=6;break}return v.abrupt("break",37);case 6:u=r[o++],v.next=13;break;case 9:o=r.next();if(!o.done){v.next=12;break}return v.abrupt("break",37);case 12:u=o.value;case 13:return a=u,v.next=16,window.refreshSingleCollection(a);case 16:return a.items=a.items||{},v.next=19,window.loadCollectionItems(a.address);case 19:f=v.sent,l=f,c=Array.isArray(l),h=0,l=c?l:l[Symbol.iterator]();case 21:if(!c){v.next=27;break}if(!(h>=l.length)){v.next=24;break}return v.abrupt("break",35);case 24:p=l[h++],v.next=31;break;case 27:h=l.next();if(!h.done){v.next=30;break}return v.abrupt("break",35);case 30:p=h.value;case 31:d=p,e.push(window.loadItemData(a.items[d]=a.items[d]||{objectId:d,collection:a},a,n.view));case 33:v.next=21;break;case 35:v.next=3;break;case 37:return v.next=39,Promise.all(e);case 39:n.view.setState({loaded:!0}),v.next=44;break;case 42:v.prev=42,v.t0=v["catch"](0);case 44:case"end":return v.stop()}},i,this,[[0,42]])}));return r}()};var Wallet=React.createClass({displayName:"Wallet",requiredScripts:["spa/loader.jsx","spa/lazyImageLoader.jsx"],getList:function(t){return[].concat(t?this.getOwnedList():this.getHostList(),t?this.getHostList():this.getOwnedList())},getHostList:function(){var t=window.getState(this),n=t.collections;return n=n.filter(function(e){return e.hasBalance||e.isOwner}),n.filter(function(e){return e.isOwner})},getOwnedList:function(){var t=window.getState(this),n=t.collections;return n=n.filter(function(e){return e.hasBalance||e.isOwner}),n.filter(function(e){return e.hasBalance&&!e.isOwner})},toggle:function e(t){window.preventItem(t);var n=window.getState(this),r=n.toggle,e=t.currentTarget.dataset.key;e=e===r?null:e;if(e){var i=n.collections.filter(function(t){return t.key===e})[0];i.hasBalance||(e=null)}this.setState({toggle:e})},goToCollection:function(t){window.preventItem(t);var n=window.getState(this),r=n.collections.filter(function(e){return e.key===t.currentTarget.dataset.key})[0];this.emit("wallet/toggle",!1),this.emit("section/change","spa/collection",{collection:r,collectionAddress:r.address,collections:n.collections})},goToItem:function(t){window.preventItem(t);var n=window.getState(this),r=n.collections.filter(function(e){return e.key===t.currentTarget.dataset.collection})[0],i=r.items[t.currentTarget.dataset.item];this.emit("wallet/toggle",!1),this.emit("section/change","spa/item",{collection:r,item:i,collections:n.collections})},getDefaultSubscriptions:function(){var t=this;return{"collections/refresh":function(){return t.controller.loadData()},"wallet/update":function(){return t.controller.loadData()},"ethereum/ping":function(){return t.controller.loadData()}}},render:function(){var t=this,n=window.getState(this);return n.wallet?React.createElement("section",{className:"sideALLThing"},React.createElement("a",{className:"BoBoBoaThings",href:"javascript:;",onClick:function(){return t.emit("wallet/toggle",!1)}}),React.createElement("section",{className:"sideThing"},React.createElement("section",{className:"Thewallet"},React.createElement("h2",null,"Host"),n.collections&&this.getHostList().map(function(e){return React.createElement("section",{key:e.key,className:"walletCollection"},React.createElement("section",{className:"walletCollectionOpener"},React.createElement("h5",{className:"walletCollectionOpenerName"},React.createElement("a",{href:"javascript:;","data-key":e.key,onClick:t.toggle},e.name)),React.createElement("a",{href:"javascript:;","data-key":e.key,onClick:t.goToCollection},"Visit"),React.createElement("a",{target:"_blank",href:window.context.openSeaCollectionLinkTemplate.format(e.openSeaName)},"OpenSea")),t.state&&t.state.toggle===e.key&&React.createElement("section",{className:"walletCollectionItems"},e.items&&Object.values(e.items).filter(function(e){return e.dynamicData&&e.dynamicData.balanceOf&&e.dynamicData.balanceOf!=="0"}).map(function(n){return React.createElement("section",{key:n.key,className:"walletCollectionItem"},React.createElement("a",{href:"javascript:;",onClick:t.goToItem,"data-collection":e.key,"data-item":n.key},React.createElement("figure",{className:"collectionIcon",style:{"background-color":n.backgroundImage}},React.createElement(LazyImageLoader,{src:window.getElementImage(n)}),n.dynamicData&&React.createElement("span",{className:"walletCollectionItemQuantity"},window.formatMoney(n.dynamicData.balanceOfPlain,1)))))})))}),React.createElement("h2",null,"Owned"),n.collections&&this.getOwnedList().map(function(e){return React.createElement("section",{key:e.key,className:"walletCollection"},React.createElement("section",{className:"walletCollectionOpener"},React.createElement("h5",{className:"walletCollectionOpenerName"},React.createElement("a",{href:"javascript:;","data-key":e.key,onClick:t.toggle},e.name)),React.createElement("a",{href:"javascript:;","data-key":e.key,onClick:t.goToCollection},"Visit"),React.createElement("a",{target:"_blank",href:window.context.openSeaCollectionLinkTemplate.format(e.openSeaName)},"OpenSea")),t.state&&t.state.toggle===e.key&&React.createElement("section",{className:"walletCollectionItems"},e.items&&Object.values(e.items).filter(function(e){return e.dynamicData&&e.dynamicData.balanceOf&&e.dynamicData.balanceOf!=="0"}).map(function(n){return React.createElement("section",{key:n.key,className:"walletCollectionItem"},React.createElement("a",{href:"javascript:;",onClick:t.goToItem,"data-collection":e.key,"data-item":n.key},React.createElement("figure",{className:"collectionIcon",style:{"background-color":n.backgroundImage}},React.createElement(LazyImageLoader,{src:window.getElementImage(n)}),n.dynamicData&&React.createElement("span",{className:"walletCollectionItemQuantity"},window.formatMoney(n.dynamicData.balanceOfPlain,1)))))})))})))):React.createElement("span",{style:{display:"none"}})}});var WrapController=function(t){var n=this;n.view=t,n.getSelectedToken=function(t){return t||n.view.state&&n.view.state.selectedToken},n.onTokenAddressChange=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e,r){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:try{r=window.web3.utils.toChecksumAddress(r)}catch(o){r=undefined}if(r){s.next=3;break}return s.abrupt("return",n.view.setState({selectedToken:e!=="ETH"?null:{type:e,name:"Ethereum",symbol:"ETH",decimals:18}},e!=="ETH"?undefined:n.refreshData));case 3:return i={type:e,address:r,contract:window.newContract(window.context.IERC1155ABI,r),erc20Contract:window.newContract(window.context.IERC20ABI,r),erc721Contract:window.newContract(window.context.IERC721ABI,r)},s.prev=4,s.next=7,window.blockchainCall(i.contract.methods.name);case 7:i.name=s.sent,s.next=12;break;case 10:s.prev=10,s.t0=s["catch"](4);case 12:return s.prev=12,s.next=15,window.blockchainCall(i.contract.methods.symbol);case 15:i.symbol=s.sent,s.next=20;break;case 18:s.prev=18,s.t1=s["catch"](12);case 20:return s.prev=20,s.next=23,window.blockchainCall(i.contract.methods.decimals);case 23:i.decimals=s.sent,s.next=28;break;case 26:s.prev=26,s.t2=s["catch"](20);case 28:n.view.setState({selectedToken:i},n.refreshData);case 29:case"end":return s.stop()}},t,this,[[4,10],[12,18],[20,26]])}));return function(t,n){return e.apply(this,arguments)}}(),n.refreshData=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.refreshBalanceOf();case 1:case"end":return t.stop()}},r,this)}));return t}(),n.refreshBalanceOf=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=n.getSelectedToken();if(e){r.next=3;break}return r.abrupt("return");case 3:r.prev=3,r.t0=e.decimals;if(r.t0){r.next=9;break}return r.next=8,window.blockchainCall(e.contract.methods.decimals,e.tokenId);case 8:r.t0=r.sent;case 9:e.decimals=r.t0,r.next=14;break;case 12:r.prev=12,r.t1=r["catch"](3);case 14:e.balanceOf="0",e.approved=!0;if(e.type!=="ERC20"){r.next=19;break}return r.next=19,n.refreshBalanceOfERC20(e);case 19:if(e.type!=="ETH"){r.next=25;break}return r.next=22,window.web3.eth.getBalance(window.walletAddress);case 22:e.balanceOf=r.sent,r.next=33;break;case 25:return r.prev=25,r.next=28,window.blockchainCall(e.contract.methods.balanceOf,window.walletAddress,e.tokenId);case 28:e.balanceOf=r.sent,r.next=33;break;case 31:r.prev=31,r.t2=r["catch"](25);case 33:e.balanceOfPlain=n.fromDecimals(e.balanceOf),n.view.setState({selectedToken:e});case 35:case"end":return r.stop()}},r,this,[[3,12],[25,31]])}));return t}(),n.fromDecimals=function(t){var r=n.getSelectedToken(r);if(!r||!t)return;return r.decimals&&window.asNumber(r.decimals)>1&&(t=window.fromDecimals(t,r.decimals,!0)),t},n.toDecimals=function(t){var r=n.getSelectedToken(r);if(!r||!t)return;return r.decimals&&window.asNumber(r.decimals)>1&&(t=window.toDecimals(t,r.decimals)),t.split(",").join("")},n.refreshBalanceOfERC20=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=n.getSelectedToken(e);if(e){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,window.blockchainCall(e.erc20Contract.methods.balanceOf,window.walletAddress);case 6:e.balanceOf=r.sent,r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](3);case 11:return e.allowance="0",r.prev=12,r.next=15,window.blockchainCall(e.erc20Contract.methods.allowance,window.walletAddress,window.currentEthItemERC20Wrapper.options.address);case 15:e.allowance=r.sent,r.next=20;break;case 18:r.prev=18,r.t1=r["catch"](12);case 20:e.approved=parseInt(e.allowance)>=parseInt(e.balanceOf);case 21:case"end":return r.stop()}},r,this,[[3,9],[12,18]])}));return t}(),n.performApprove=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=n.getSelectedToken(e);if(e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,window.blockchainCall(e.erc20Contract.methods.approve,window.currentEthItemERC20Wrapper.options.address,window.numberToString(1.2676506002282294e30));case 5:case"end":return r.stop()}},r,this)}));return t}(),n.performItemize=function(){function t(){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(){var e,t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=n.getSelectedToken(e);if(e){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,window.sleep(window.context.inputTimeout);case 5:return i.next=7,n["performItemize"+e.type](e);case 7:return i.next=9,n.view.emit("collections/refresh");case 9:return i.next=11,n.recoverCollectionAndItem(e);case 11:t=i.sent,t.created="wrap",n.view.emit("section/change","spa/successPage",t);case 14:case"end":return i.stop()}},r,this)}));return t}(),n.performItemizeETH=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=n.toDecimals(e.tokenAmount);if(!(parseInt(t)>parseInt(e.balanceOf))){i.next=3;break}throw"Insufficient amount of tokens to wrap";case 3:return i.next=5,window.blockchainCall(t,window.currentEthItemERC20Wrapper.methods.mintETH);case 5:return i.next=7,blockchainCall(window.currentEthItemERC20Wrapper.methods.ETHEREUM_OBJECT_ID);case 7:e.tokenId=i.sent,e.wrappedAddress=window.currentEthItemERC20Wrapper.options.address;case 9:case"end":return i.stop()}},r,this)}));return t}(),n.performItemizeERC20=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t=n.toDecimals(e.tokenAmount);if(!(parseInt(t)>parseInt(e.balanceOf))){i.next=3;break}throw"Insufficient amount of tokens to wrap";case 3:return i.next=5,window.blockchainCall(window.currentEthItemERC20Wrapper.methods["mint(address,uint256)"],e.address,t);case 5:return i.next=7,blockchainCall(window.currentEthItemERC20Wrapper.methods.object,e.address);case 7:e.tokenId=i.sent,e.wrappedAddress=window.currentEthItemERC20Wrapper.options.address;case 9:case"end":return i.stop()}},r,this)}));return t}(),n.performItemizeERC1155=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function r(e){var t,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!!e.tokenId&&e.tokenId!==""){u.next=2;break}throw"Token Id is mandatory";case 2:t=n.toDecimals(e.tokenAmount);if(!(parseInt(t)>parseInt(e.balanceOf))){u.next=5;break}throw"Insufficient amount of tokens to wrap";case 5:return i=window.ethItemOrchestrator.options.address,u.prev=6,u.next=9,window.blockchainCall(window.currentEthItemFactory.methods.erc1155WrapperModel);case 9:return s=u.sent[1],u.next=12,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 12:o=u.sent,i=o&&o!==window.voidEthereumAddress?o:i,u.next=18;break;case 16:u.prev=16,u.t0=u["catch"](6);case 18:return u.next=20,window.blockchainCall(e.contract.methods.safeTransferFrom,window.walletAddress,window.ethItemOrchestrator.options.address,e.tokenId,t,"0x");case 20:return u.next=22,window.blockchainCall(window.currentEthItemFactory.methods.erc1155WrapperModel);case 22:return s=u.sent[1],u.next=25,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 25:e.wrappedAddress=u.sent;case 26:case"end":return u.stop()}},r,this,[[6,16]])}));return t}(),n.performItemizeERC721=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t,r,i,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!!e.tokenId&&e.tokenId!==""){u.next=2;break}throw"Token Id is mandatory";case 2:return u.t0=window.web3.utils,u.next=5,window.blockchainCall(e.erc721Contract.methods.ownerOf,e.tokenId);case 5:return u.t1=u.sent,t=u.t0.toChecksumAddress.call(u.t0,u.t1),u.t2=window.web3.utils,u.next=10,window.blockchainCall(e.erc721Contract.methods.getApproved,e.tokenId);case 10:u.t3=u.sent,r=u.t2.toChecksumAddress.call(u.t2,u.t3);if(t===window.walletAddress||r===window.walletAddress){u.next=14;break}throw"You don't have the permissions to transfer this ERC721 NFT";case 14:return i=window.ethItemOrchestrator.options.address,u.prev=15,u.next=18,window.blockchainCall(window.currentEthItemFactory.methods.erc721WrapperModel);case 18:return s=u.sent[1],u.next=21,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 21:o=u.sent,i=o&&o!==window.voidEthereumAddress?o:i,u.next=27;break;case 25:u.prev=25,u.t4=u["catch"](15);case 27:return u.next=29,window.blockchainCall(e.erc721Contract.methods.safeTransferFrom,window.walletAddress,i,e.tokenId,"0x");case 29:return u.next=31,window.blockchainCall(window.currentEthItemFactory.methods.erc721WrapperModel);case 31:return s=u.sent[1],u.next=34,window.blockchainCall(window.currentEthItemKnowledgeBase.methods.wrapper,e.address,s);case 34:e.wrappedAddress=u.sent;case 35:case"end":return u.stop()}},n,this,[[15,25]])}));return t}(),n.recoverCollectionAndItem=function(){function t(t){return e.apply(this,arguments)}var e=_asyncToGenerator(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.wrappedAddress=window.web3.utils.toChecksumAddress(e.wrappedAddress),r.next=3,window.loadSingleCollection(e.wrappedAddress);case 3:return t=r.sent,t.items=t.items||{},r.next=7,window.loadItemData(t.items[e.tokenId]=t.items[e.tokenId]||{objectId:e.tokenId,collection:t});case 7:return r.abrupt("return",{collection:t,item:t.items[e.tokenId],name:t.items[e.tokenId].name,tokenAmount:e.tokenAmount||1});case 8:case"end":return r.stop()}},n,this)}));return t}()};var Wrap=React.createClass({displayName:"Wrap",requiredScripts:["spa/innerLoader.jsx"],getDefaultSubscriptions:function(){return{"ethereum/ping":this.controller.refreshData}},getSelectedTokenType:function(){return this.state&&this.state.selectedTokenType||window.context.supportedWrappedTokens[0]},reloadToken:function(t){window.preventItem(t),this.controller.onTokenAddressChange(this.getSelectedTokenType(),this.tokenAddressInput.value)},onTokenTypeChange:function(t){window.preventItem(t);var n=this;this.setState({selectedTokenType:t.currentTarget.value},function(){n.controller.onTokenAddressChange(n.getSelectedTokenType(),n.tokenAddressInput&&n.tokenAddressInput.value)})},onChange:function(t){window.preventItem(t);var n=t.currentTarget.value,r=this[t.currentTarget.dataset.action],i=t.currentTarget.dataset.action+"Timeout";this[i]&&window.clearTimeout(this[i]),this[i]=setTimeout(function(){return r(n)},window.context.inputTimeout)},onTokenAddressChange:function(t){var n=this;n.setState({selectedToken:null},function(){return n.controller.onTokenAddressChange(n.getSelectedTokenType(),t)})},onTokenIdChange:function(t){if(!this.state||!this.state.selectedToken)return;this.state.selectedToken.tokenId=t,this.controller.refreshBalanceOf()},onTokenAmountChange:function(t){if(!this.state||!this.state.selectedToken)return;this.state.selectedToken.tokenAmount=t},max:function(t){window.preventItem(t);if(!this.state||!this.state.selectedToken||!this.state.selectedToken.balanceOfPlain)return;this.tokenAmountInput.value=this.state.selectedToken.tokenAmount=this.state.selectedToken.balanceOfPlain.split(",").join(""),this.setState({selectedToken:this.state.selectedToken})},actionEnd:function(){this.controller.refreshData()},componentDidMount:function(){this.controller.onTokenAddressChange(this.getSelectedTokenType(),this.tokenAddressInput&&this.tokenAddressInput.value),window.setHomepageLink("?section=wrap")},render:function(){var t=this,n,r=this.getSelectedTokenType(),i=this.state||{};return React.createElement("section",{className:"Pager"},React.createElement("section",{className:"wrapPage"},React.createElement("section",{className:"wrapBox"},React.createElement("section",{className:"WrapWhat"},React.createElement("p",null,"Wrap Tokens to ITEMs"),React.createElement("br",null),React.createElement("select",{onChange:this.onTokenTypeChange},window.context.supportedWrappedTokens.map(function(e){return React.createElement("option",{key:e,selected:r===e,value:e},e)})),r!=="ETH"&&React.createElement("input",{ref:function(n){return t.tokenAddressInput=n},className:"addressWrapSelector",type:"text",placeholder:"Token address","data-action":"onTokenAddressChange",onKeyUp:this.onChange,onChange:this.onChange}),r!=="ETH"&&React.createElement("a",{className:"LoadToITEM",href:"javascript:;",onClick:this.reloadToken},"Load")),React.createElement("section",{className:"WrapWhatLoaded"},i.selectedToken&&(i.selectedToken.name||i.selectedToken.symbol)&&React.createElement("h6",{className:"tokenSelectedToWrap"},window.shortenWord(i.selectedToken.name,10)," ",i.selectedToken.symbol&&i.selectedToken.name?" ("+window.shortenWord(i.selectedToken.symbol,10)+")":window.shortenWord(i.selectedToken.symbol,10)),i.selectedToken&&r!=="ERC20"&&r!=="ETH"&&React.createElement("section",{className:"tokenSelectedToWrapDecide"},React.createElement("input",{className:"BalancetoWrapSelector",placeholder:"Token ID",type:"text","data-action":"onTokenIdChange",onKeyUp:this.onChange,onChange:this.onChange})),i.selectedToken&&r!=="ERC721"&&i.selectedToken&&i.selectedToken.balanceOfPlain&&React.createElement("span",{className:"tokenSelectedToWrapBalance"},"balance: ",i.selectedToken.balanceOfPlain),i.selectedToken&&r!=="ERC721"&&React.createElement("section",{className:"tokenSelectedToWrapDecide"},React.createElement("a",{className:"tokenSelectedToWrapBalanceALL",onClick:this.max},"MAX"),React.createElement("input",(n={ref:function(n){return t.tokenAmountInput=n},className:"BalancetoWrapSelector",placeholder:"Ammount",type:"text"},n.placeholder="0.00",n.spellcheck="false",n.autocomplete="off",n.autocorrect="off",n.inputmode="decimal",n.pattern="^[0-9][.,]?[0-9]$",n["data-action"]="onTokenAmountChange",n.onKeyUp=this.onChange,n.onChange=this.onChange,n))),r==="ERC20"&&i.performing!=="approve"&&React.createElement("a",{className:"BeforeToWrapToITEM"+(!i.selectedToken||i.selectedToken.approved?" disabled":""),"data-action":"approve",onClick:window.perform,href:"javascript:;"},"Approve"),r==="ERC20"&&i.performing==="approve"&&React.createElement(InnerLoader,null),i.performing!=="itemize"&&React.createElement("a",{className:"WrapToITEM"+(!i.selectedToken||!i.selectedToken.approved?" disabled":""),"data-action":"itemize",onClick:window.perform,href:"javascript:;"},"ITEMIZE"),i.performing==="itemize"&&React.createElement(InnerLoader,null)))))}});!window.preloadedScripts && (window.preloadedScripts=[]);Array.prototype.push.apply(window.preloadedScripts,['spa/collection/controller.jsx','spa/collection/style.min.css','spa/collection/view.jsx','spa/collectionSingleItem/controller.jsx','spa/collectionSingleItem/style.min.css','spa/collectionSingleItem/view.jsx','spa/connect.jsx','spa/create/controller.jsx','spa/create/style.min.css','spa/create/view.jsx','spa/createCollectionWizard/controller.jsx','spa/createCollectionWizard/style.min.css','spa/createCollectionWizard/view.jsx','spa/createItemWizard/controller.jsx','spa/createItemWizard/style.min.css','spa/createItemWizard/view.jsx','spa/editor/controller.jsx','spa/editor/style.min.css','spa/editor/view.jsx','spa/explore/controller.jsx','spa/explore/style.min.css','spa/explore/view.jsx','spa/farm/controller.jsx','spa/farm/style.min.css','spa/farm/view.jsx','spa/fullLoader.jsx','spa/index/controller.jsx','spa/index/style.min.css','spa/index/view.jsx','spa/innerLoader.jsx','spa/item/controller.jsx','spa/item/style.min.css','spa/item/view.jsx','spa/lazyImageLoader.jsx','spa/loader.jsx','spa/menu/controller.jsx','spa/menu/style.min.css','spa/menu/view.jsx','spa/search/controller.jsx','spa/search/style.min.css','spa/search/view.jsx','spa/singleCollection/controller.jsx','spa/singleCollection/style.min.css','spa/singleCollection/view.jsx','spa/successPage/controller.jsx','spa/successPage/style.min.css','spa/successPage/view.jsx','spa/wallet/controller.jsx','spa/wallet/style.min.css','spa/wallet/view.jsx','spa/wrap/controller.jsx','spa/wrap/style.min.css','spa/wrap/view.jsx']);